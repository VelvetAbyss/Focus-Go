@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: var(--font-body);
  background: var(--bg);
  color: var(--text-primary);
  transition: background-color 200ms var(--ease-standard), color 200ms var(--ease-standard);
}

h1,
h2,
h3,
h4 {
  font-family: var(--font-display);
  margin: 0;
}

button,
input,
select,
textarea {
  font-family: var(--font-body);
  color: inherit;
}

/* Form controls: unified baseline (input/select/textarea/checkbox/range) */
input,
select,
textarea {
  width: 100%;
  border: 1px solid var(--border);
  background: var(--bg-muted);
  @apply rounded-lg;
  padding: 8px 10px;
  min-height: var(--control-height);
}

input::placeholder,
textarea::placeholder {
  color: color-mix(in srgb, var(--text-secondary) 80%, transparent);
}

input:focus-visible,
select:focus-visible,
textarea:focus-visible,
.button:focus-visible {
  outline: 3px solid var(--focus-ring);
  outline-offset: 2px;
}

select {
  appearance: none;
  -webkit-appearance: none;
  padding-right: 34px;
  background-image:
    linear-gradient(45deg, transparent 50%, color-mix(in srgb, var(--text-secondary) 80%, transparent) 50%),
    linear-gradient(135deg, color-mix(in srgb, var(--text-secondary) 80%, transparent) 50%, transparent 50%);
  background-position: right 12px top 52%, right 7px top 52%;
  background-size: 6px 6px;
  background-repeat: no-repeat;
}

input[type='checkbox'] {
  width: 18px;
  height: 18px;
  min-height: 18px;
  padding: 0;
  border-radius: 6px;
  appearance: none;
  -webkit-appearance: none;
  background: var(--bg-muted);
  border: 1px solid var(--border);
  display: inline-grid;
  place-content: center;
}

input[type='checkbox']::after {
  content: '';
  width: 10px;
  height: 10px;
  transform: scale(0);
  transition: transform var(--transition-base);
  box-shadow: inset 1em 1em #fff;
  clip-path: polygon(14% 44%, 0 65%, 44% 100%, 100% 20%, 80% 0, 43% 62%);
}

input[type='checkbox']:checked {
  background: var(--accent);
  border-color: color-mix(in srgb, var(--accent) 60%, var(--border));
}

input[type='checkbox']:checked::after {
  transform: scale(1);
}

input[type='range'] {
  min-height: 32px;
  padding: 0;
  border: 0;
  background: transparent;
  accent-color: var(--accent);
}

input[type='range']::-webkit-slider-runnable-track {
  height: 6px;
  border-radius: 999px;
  background: var(--bg-muted);
  border: 1px solid var(--border);
}

input[type='range']::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 999px;
  background: var(--bg-elevated);
  border: 1px solid var(--border);
  margin-top: -7px;
  box-shadow: 0 8px 16px rgba(22, 24, 28, 0.12);
}

input[type='range']::-moz-range-track {
  height: 6px;
  border-radius: 999px;
  background: var(--bg-muted);
  border: 1px solid var(--border);
}

input[type='range']::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 999px;
  background: var(--bg-elevated);
  border: 1px solid var(--border);
}

.select {
  position: relative;
  width: 100%;
}

.select__trigger {
  width: 100%;
  height: var(--control-height);
  padding: 0 12px;
  @apply rounded-lg;
  border: 1px solid var(--border);
  background: var(--surface);
  font: inherit;
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
  transition: border-color var(--transition-base);
}

.select__trigger-text {
  flex: 1;
  min-width: 0;
  display: block;
  text-align: left;
}

.select__value {
  display: grid;
  gap: 2px;
  min-width: 0;
}

.select__value-label {
  font-weight: 650;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.select__value-description {
  font-size: 12px;
  color: var(--text-secondary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.select__placeholder {
  color: var(--text-secondary);
}

.select__trigger:focus-visible {
  box-shadow: 0 0 0 3px var(--focus-ring) inset;
  border-color: var(--focus-ring);
}

.select__trigger[data-state='open'] {
  box-shadow: 0 0 0 3px var(--focus-ring) inset;
  border-color: var(--focus-ring);
}

.select__trigger:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

.select__trigger-icon {
  width: 10px;
  height: 10px;
  border-left: 2px solid var(--text-secondary);
  border-bottom: 2px solid var(--text-secondary);
  transform: translateY(-2px) rotate(-45deg);
  transition: transform var(--motion-duration-fast) var(--ease-decelerate);
}

.select__trigger[data-state='open'] .select__trigger-icon {
  transform: translateY(2px) rotate(135deg);
}

.select__trigger:disabled .select__trigger-icon {
  opacity: 0.8;
}

.select__menu {
  position: absolute;
  top: calc(100% + 6px);
  left: 0;
  right: 0;
  @apply rounded-lg;
  border: 1px solid var(--border);
  background: var(--surface);
  box-shadow: var(--shadow-md);
  transform-origin: top;
  z-index: 1000;
  overflow: hidden;
  opacity: 0;
  transform: translateY(calc(var(--motion-shift-xs) * -1)) scale(0.985);
  pointer-events: none;
  transition: opacity var(--motion-duration-medium) var(--ease-decelerate),
    transform var(--motion-duration-medium) var(--ease-decelerate);
  will-change: transform, opacity;
}

.select--open .select__menu {
  opacity: 1;
  transform: translateY(0) scale(1);
  pointer-events: auto;
}

.select__menuPortal {
  @apply rounded-lg;
  border: 1px solid var(--border);
  background: var(--surface);
  box-shadow: var(--shadow-md);
  transform-origin: top;
  z-index: var(--z-popover);
  overflow: hidden;
  outline: none;
  padding: 0;
  width: var(--radix-select-trigger-width);
  max-height: min(320px, calc(100vh - 80px));
}

.select__menuPortal[data-state='open'] {
  animation: fg-popover-in var(--motion-duration-base) var(--ease-emphasized);
}

@keyframes fg-popover-in {
  from {
    opacity: 0;
    transform: translateY(calc(var(--motion-shift-xs) * -1)) scale(0.985);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.fg-popover {
  transform-origin: top;
}

.fg-popover[data-state='open'] {
  animation: fg-popover-in var(--motion-duration-base) var(--ease-emphasized);
}

html[data-motion='reduce'] .select__menuPortal[data-state='open'] {
  animation: none;
}

html[data-motion='reduce'] .fg-popover[data-state='open'] {
  animation: none;
}

html[data-motion='reduce'] .select__trigger-icon {
  transition: none;
}

html[data-motion='reduce'] .select__menu {
  transition: none;
}

.select__viewport {
  padding: 8px 0;
}

.select__option {
  --select-option-side-gap: max(8px, 6%);
  position: relative;
  width: calc(100% - (var(--select-option-side-gap) * 2));
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 10px 12px;
  margin: 8px var(--select-option-side-gap);
  border-radius: 10px;
  cursor: pointer;
  font-size: 14px;
  box-shadow: none;
  transition: background var(--transition-base), box-shadow var(--transition-base);
  background: transparent;
  color: inherit;
  appearance: none;
  -webkit-appearance: none;
  outline: none;
}

.select__option[data-highlighted] {
  background: color-mix(in srgb, var(--accent-soft) 65%, transparent);
  box-shadow: 0 8px 18px rgba(22, 24, 28, 0.1);
}

.select__option[data-state='checked'] {
  background: color-mix(in srgb, var(--accent-soft) 88%, transparent);
  box-shadow: 0 12px 26px rgba(22, 24, 28, 0.12);
  color: var(--text-primary);
}

.select__option-text {
  flex: 1;
  min-width: 0;
  display: grid;
  justify-items: center;
  text-align: center;
  gap: 2px;
}

.select__option-label {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.select__option-description {
  font-size: 12px;
  color: var(--text-secondary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.select__option[data-state='checked'] .select__option-label {
  font-weight: 700;
  color: var(--accent);
}

.select__option-indicator {
  position: absolute;
  right: var(--select-option-side-gap);
  top: 50%;
  transform: translateY(-50%);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--accent);
  opacity: 0;
  transition: opacity var(--transition-base);
}

.select__option[data-state='checked'] .select__option-indicator {
  opacity: 1;
}

html[data-motion='reduce'] .select__option-indicator {
  transition: none;
}

label {
  display: grid;
  gap: 6px;
  font-size: 12px;
  color: var(--text-secondary);
}

label input[type='checkbox'] {
  width: 18px;
}

.app-shell {
  padding: 32px;
  min-height: 100vh;
  background: radial-gradient(circle at top left, color-mix(in srgb, var(--accent) 14%, transparent), transparent 56%),
    radial-gradient(circle at 20% 80%, color-mix(in srgb, var(--accent) 10%, transparent), transparent 62%);
}

.app-shell__header {
  --header-action-guard: 360px;
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  align-items: start;
  gap: 18px;
  margin-bottom: 8px;
  position: relative;
}

.app-shell__header--settings {
  grid-template-columns: auto 1fr;
}

.app-shell__hero-stage {
  grid-column: 1 / -1;
  min-height: 96px;
  position: relative;
  border-radius: 16px;
  overflow: hidden;
  z-index: 1;
}

.app-shell__hero-stage--editing {
  background-image:
    linear-gradient(to right, color-mix(in srgb, var(--border) 62%, transparent) 1px, transparent 1px),
    linear-gradient(to bottom, color-mix(in srgb, var(--border) 62%, transparent) 1px, transparent 1px);
  background-size: 8px 8px;
}

.app-shell__hero-stage--editing::after {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: var(--header-action-guard);
  height: 100%;
  background: transparent;
  border-left: 1px dashed color-mix(in srgb, var(--border) 65%, transparent);
  pointer-events: auto;
  z-index: 1;
}

.app-shell__hero-item {
  --node-scale: 1;
  position: absolute;
  transform-origin: top left;
  z-index: 2;
  pointer-events: none;
}

.app-shell__hero-item.is-editable {
  border: 1px dashed color-mix(in srgb, var(--accent) 52%, var(--border));
  border-radius: 10px;
  padding: 6px 8px;
  cursor: grab;
  background: color-mix(in srgb, var(--surface) 72%, transparent);
  box-shadow: 0 8px 22px color-mix(in srgb, var(--accent) 15%, transparent);
  user-select: none;
  -webkit-user-select: none;
  pointer-events: auto;
}

.app-shell__hero-item.is-editable:active {
  cursor: grabbing;
}

.app-shell__hero-handle {
  position: absolute;
  width: 10px;
  height: 10px;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, var(--accent) 68%, var(--border));
  background: var(--surface);
  padding: 0;
  min-height: 0;
  cursor: nwse-resize;
}

.app-shell__hero-handle--nw {
  left: -6px;
  top: -6px;
}

.app-shell__hero-handle--ne {
  right: -6px;
  top: -6px;
}

.app-shell__hero-handle--sw {
  left: -6px;
  bottom: -6px;
}

.app-shell__hero-handle--se {
  right: -6px;
  bottom: -6px;
}

.app-shell__hero-date {
  margin: 0;
  font-family:
    'Source Han Sans SC',
    'Noto Sans CJK SC',
    'PingFang SC',
    'Hiragino Sans GB',
    'Microsoft YaHei',
    'Helvetica Neue',
    Arial,
    sans-serif;
  color: color-mix(in srgb, var(--text-secondary) 88%, var(--text-primary) 12%);
  line-height: 1.2;
  letter-spacing: 0.02em;
  white-space: nowrap;
  font-size: calc(24px * var(--node-scale));
  font-weight: 600;
}

.app-shell__hero-lunar {
  margin: 0;
  font-family:
    'Source Han Sans SC',
    'Noto Sans CJK SC',
    'PingFang SC',
    'Hiragino Sans GB',
    'Microsoft YaHei',
    'Helvetica Neue',
    Arial,
    sans-serif;
  color: color-mix(in srgb, var(--text-secondary) 88%, var(--text-primary) 12%);
  line-height: 1.2;
  font-size: calc(24px * var(--node-scale));
  font-weight: 600;
  letter-spacing: 0.02em;
  white-space: nowrap;
}

.app-shell__hero-time {
  display: inline-flex;
  align-items: baseline;
  gap: 0;
  --clock-seconds-size: calc(36px * var(--node-scale));
  color: color-mix(in srgb, var(--text-primary) 92%, var(--accent) 8%);
  white-space: nowrap;
}

.app-shell__hero-time-main {
  font-family: 'SFMono-Regular', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  font-weight: 800;
  font-size: calc(72px * var(--node-scale));
  line-height: 1;
  font-variant-numeric: tabular-nums;
  font-feature-settings: 'tnum';
  letter-spacing: 0;
}

.app-shell__hero-time-colon {
  font-family: 'SFMono-Regular', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  font-size: calc(70px * var(--node-scale));
  line-height: 1;
  font-weight: 800;
  margin: 0;
}

.app-shell__hero-time-seconds-wrap {
  display: inline-flex;
  align-items: baseline;
  margin-left: 0;
  gap: 0;
  color: color-mix(in srgb, var(--text-primary) 92%, var(--accent) 8%);
  font-size: var(--clock-seconds-size);
  line-height: 1;
  font-family: 'SFMono-Regular', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  font-variant-numeric: tabular-nums;
  font-feature-settings: 'tnum';
}

.app-shell__hero-time-seconds {
  font-size: var(--clock-seconds-size) !important;
  line-height: 1;
  font-weight: 800;
}

.app-shell__settings-title {
  margin: 0;
}

.app-shell__status {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: nowrap;
  white-space: nowrap;
  min-width: 0;
  justify-content: flex-end;
  animation: app-shell-status-enter var(--motion-duration-slow) var(--ease-emphasized) 110ms both;
  position: absolute;
  top: 0;
  right: 0;
  width: var(--header-action-guard);
  height: 100%;
  padding-top: 8px;
  padding-right: 0;
  justify-self: auto;
  align-self: auto;
  z-index: 3;
  pointer-events: auto;
}

.app-shell__edit-layout {
  display: inline-flex;
  flex: 0 1 auto;
}

.app-shell__settings-link {
  flex: 0 0 auto;
}

.app-shell__manage-widgets {
  background: var(--surface);
  color: var(--text-primary);
  border-color: var(--border);
  box-shadow: none;
}

.app-shell__manage-widgets:hover {
  box-shadow: none;
}

.app-shell__manage-widgets.is-active {
  background: color-mix(in srgb, var(--accent) 68%, var(--bg-elevated) 32%);
  color: color-mix(in srgb, #0c2f29 90%, var(--text-primary) 10%);
  border-color: color-mix(in srgb, var(--accent) 35%, var(--border));
  box-shadow: 0 7px 12px color-mix(in srgb, var(--accent) 13%, transparent);
}

.app-shell__top-action {
  height: 34px;
  padding: 0 12px;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, var(--accent) 32%, var(--border));
  background: color-mix(in srgb, var(--accent) 66%, var(--bg-elevated) 34%);
  color: color-mix(in srgb, #0c2f29 90%, var(--text-primary) 10%);
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 15px;
  font-weight: 600;
  line-height: 1;
  text-decoration: none;
  box-shadow: 0 8px 14px color-mix(in srgb, var(--accent) 14%, transparent);
  transition: transform var(--motion-duration-fast) var(--ease-standard),
    box-shadow var(--motion-duration-fast) var(--ease-standard),
    filter var(--motion-duration-fast) var(--ease-standard),
    background var(--motion-duration-fast) var(--ease-standard);
  transform: translate3d(0, 0, 0);
}

.app-shell__top-action:hover {
  filter: brightness(1.015);
  transform: translate3d(0, -1px, 0) scale(1.01);
  box-shadow: 0 9px 18px color-mix(in srgb, var(--accent) 18%, transparent);
}

.app-shell__top-action:active {
  transform: translate3d(0, 0, 0) scale(0.985);
  box-shadow: 0 6px 12px color-mix(in srgb, var(--accent) 12%, transparent);
}

.app-shell__top-action:focus-visible {
  outline: 3px solid var(--focus-ring);
  outline-offset: 2px;
}

.app-shell__top-action svg {
  flex: 0 0 auto;
}

.app-shell__top-action span {
  white-space: nowrap;
}

.app-shell--theme-switch .app-shell__route-layer {
  animation: app-theme-fade-in 150ms var(--ease-standard);
}

@keyframes app-theme-fade-in {
  from {
    opacity: 0.84;
    filter: saturate(0.94);
  }
  to {
    opacity: 1;
    filter: saturate(1);
  }
}

.theme-switch {
  --toggle-size: 10px;
  --container-width: 5.625em;
  --container-height: 2.5em;
  --container-radius: 6.25em;
  --container-light-bg: #3d7eae;
  --container-night-bg: #1d1f2c;
  --circle-container-diameter: 3.375em;
  --sun-moon-diameter: 2.125em;
  --sun-bg: #ecca2f;
  --moon-bg: #c4c9d1;
  --spot-color: #959db1;
  --circle-container-offset: calc((var(--circle-container-diameter) - var(--container-height)) / 2 * -1);
  --stars-color: #fff;
  --clouds-color: #f3fdff;
  --back-clouds-color: #aacadf;
  --transition: 0.5s cubic-bezier(0, -0.02, 0.4, 1.25);
  --circle-transition: 0.3s cubic-bezier(0, -0.02, 0.35, 1.17);
  display: inline-flex;
  flex: 0 0 auto;
  border: none;
  background: transparent;
  cursor: pointer;
}

.theme-switch,
.theme-switch *,
.theme-switch *::before,
.theme-switch *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  font-size: var(--toggle-size);
}

.theme-switch__container {
  width: var(--container-width);
  height: var(--container-height);
  background-color: var(--container-light-bg);
  border-radius: var(--container-radius);
  overflow: hidden;
  cursor: pointer;
  box-shadow: 0 -0.062em 0.062em rgba(0, 0, 0, 0.25), 0 0.062em 0.125em rgba(255, 255, 255, 0.94);
  transition: var(--transition);
  position: relative;
}

.theme-switch__container::before {
  content: '';
  position: absolute;
  z-index: 1;
  inset: 0;
  box-shadow: 0 0.05em 0.187em rgba(0, 0, 0, 0.25) inset, 0 0.05em 0.187em rgba(0, 0, 0, 0.25) inset;
  border-radius: var(--container-radius);
}

.theme-switch__circle-container {
  width: var(--circle-container-diameter);
  height: var(--circle-container-diameter);
  background-color: rgba(255, 255, 255, 0.1);
  position: absolute;
  left: var(--circle-container-offset);
  top: var(--circle-container-offset);
  border-radius: var(--container-radius);
  box-shadow: inset 0 0 0 3.375em rgba(255, 255, 255, 0.1), inset 0 0 0 3.375em rgba(255, 255, 255, 0.1),
    0 0 0 0.625em rgba(255, 255, 255, 0.1), 0 0 0 1.25em rgba(255, 255, 255, 0.1);
  display: flex;
  transition: var(--circle-transition);
  pointer-events: none;
}

.theme-switch__sun-moon-container {
  pointer-events: auto;
  position: relative;
  z-index: 2;
  width: var(--sun-moon-diameter);
  height: var(--sun-moon-diameter);
  margin: auto;
  border-radius: var(--container-radius);
  background-color: var(--sun-bg);
  box-shadow: 0.062em 0.062em 0.062em 0 rgba(254, 255, 239, 0.61) inset, 0 -0.062em 0.062em 0 #a1872a inset;
  filter: drop-shadow(0.062em 0.125em 0.125em rgba(0, 0, 0, 0.25)) drop-shadow(0 0.062em 0.125em rgba(0, 0, 0, 0.25));
  overflow: hidden;
  transition: var(--transition);
}

.theme-switch__moon {
  transform: translateX(100%);
  width: 100%;
  height: 100%;
  background-color: var(--moon-bg);
  border-radius: inherit;
  box-shadow: 0.062em 0.062em 0.062em 0 rgba(254, 255, 239, 0.61) inset, 0 -0.062em 0.062em 0 #969696 inset;
  transition: var(--transition);
  position: relative;
}

.theme-switch__spot {
  position: absolute;
  top: 0.75em;
  left: 0.312em;
  width: 0.75em;
  height: 0.75em;
  border-radius: var(--container-radius);
  background-color: var(--spot-color);
  box-shadow: 0 0.0312em 0.062em rgba(0, 0, 0, 0.25) inset;
}

.theme-switch__spot:nth-of-type(2) {
  width: 0.375em;
  height: 0.375em;
  top: 0.937em;
  left: 1.375em;
}

.theme-switch__spot:nth-last-of-type(3) {
  width: 0.25em;
  height: 0.25em;
  top: 0.312em;
  left: 0.812em;
}

.theme-switch__clouds {
  width: 1.25em;
  height: 1.25em;
  background-color: var(--clouds-color);
  border-radius: var(--container-radius);
  position: absolute;
  bottom: -0.625em;
  left: 0.312em;
  box-shadow: 0.937em 0.312em var(--clouds-color), -0.312em -0.312em var(--back-clouds-color),
    1.437em 0.375em var(--clouds-color), 0.5em -0.125em var(--back-clouds-color), 2.187em 0 var(--clouds-color),
    1.25em -0.062em var(--back-clouds-color), 2.937em 0.312em var(--clouds-color), 2em -0.312em var(--back-clouds-color),
    3.625em -0.062em var(--clouds-color), 2.625em 0 var(--back-clouds-color), 4.5em -0.312em var(--clouds-color),
    3.375em -0.437em var(--back-clouds-color), 4.625em -1.75em 0 0.437em var(--clouds-color),
    4em -0.625em var(--back-clouds-color), 4.125em -2.125em 0 0.437em var(--back-clouds-color);
  transition: var(--transition);
}

.theme-switch__stars-container {
  position: absolute;
  color: var(--stars-color);
  top: -100%;
  left: 0.312em;
  width: 2.75em;
  height: auto;
  transition: var(--transition);
}

.theme-switch__container[data-checked='true'] {
  background-color: var(--container-night-bg);
}

.theme-switch__container[data-checked='true'] .theme-switch__circle-container {
  left: calc(100% - var(--circle-container-offset) - var(--circle-container-diameter));
}

.theme-switch__container[data-checked='true'] .theme-switch__circle-container:hover {
  left: calc(100% - var(--circle-container-offset) - var(--circle-container-diameter) - 0.187em);
}

.theme-switch__circle-container:hover {
  left: calc(var(--circle-container-offset) + 0.187em);
}

.theme-switch__container[data-checked='true'] .theme-switch__moon {
  transform: translate(0);
}

.theme-switch__container[data-checked='true'] .theme-switch__clouds {
  bottom: -4.062em;
}

.theme-switch__container[data-checked='true'] .theme-switch__stars-container {
  top: 50%;
  transform: translateY(-50%);
}

html[data-motion='reduce'] .theme-switch__container,
html[data-motion='reduce'] .theme-switch__sun-moon-container,
html[data-motion='reduce'] .theme-switch__moon,
html[data-motion='reduce'] .theme-switch__clouds,
html[data-motion='reduce'] .theme-switch__stars-container,
html[data-motion='reduce'] .theme-switch__circle-container {
  transition: none;
}

.app-shell__edit-layout.is-active {
  background: color-mix(in srgb, var(--accent) 84%, #083344 16%);
  border-color: color-mix(in srgb, var(--accent) 55%, #083344 45%);
  box-shadow: 0 14px 28px color-mix(in srgb, var(--accent) 38%, transparent);
}

.app-shell__main {
  position: relative;
  min-height: 0;
}

.app-shell__route-layer {
  min-height: 0;
  position: relative;
}

@keyframes app-shell-hero-enter {
  from {
    opacity: 0;
    transform: translateY(var(--motion-shift-sm));
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes app-shell-status-enter {
  from {
    opacity: 0;
    transform: translateY(var(--motion-shift-sm));
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

html[data-motion='reduce'] .app-shell__hero-date,
html[data-motion='reduce'] .app-shell__status {
  animation: none;
}

.pill {
  padding: 6px 12px;
  @apply rounded-full;
  background: var(--accent);
  color: #fff;
  font-size: 12px;
}

.pill--soft {
  background: var(--accent-soft);
  color: var(--text-primary);
}

.dashboard__grid {
  min-height: 600px;
}

.dashboard__toolbar {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  margin-bottom: 12px;
}

.dashboard__toolbar-edit {
  display: inline-flex;
}

.dashboard__item {
  height: 100%;
  position: relative;
}

.dashboard__edit-overlay {
  position: absolute;
  inset: 0;
  z-index: 6;
  border-radius: inherit;
  background: color-mix(in srgb, #ffffff 72%, transparent);
  backdrop-filter: blur(1px);
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: auto;
  overflow: hidden;
}

.dashboard__edit-overlay span {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 6px 12px;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, var(--border) 90%, transparent);
  background: color-mix(in srgb, var(--bg-elevated) 92%, transparent);
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--text-secondary);
}

.dashboard__item.is-layout-edit > :not(.dashboard__edit-overlay):not(.react-resizable-handle) {
  pointer-events: none;
  user-select: none;
}

.dashboard__item.is-layout-edit .react-resizable-handle {
  pointer-events: auto;
  z-index: 7;
}

.dashboard__sync-error {
  margin: -2px 0 10px;
  font-size: 12px;
  color: #b42318;
}

.dashboard-widgets {
  margin-bottom: 12px;
  padding: 10px 12px;
  border: 1px solid var(--border);
  border-radius: 14px;
  background: color-mix(in srgb, var(--bg-elevated) 80%, var(--bg-muted));
  display: grid;
  gap: 8px;
}

.dashboard-widgets__row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.dashboard-widgets__title {
  font-size: 14px;
  font-weight: 600;
}

.dashboard__quick-hide {
  position: absolute;
  top: 10px;
  right: 10px;
  z-index: 2;
  border: 1px solid var(--border);
  border-radius: 999px;
  background: color-mix(in srgb, var(--bg-elevated) 88%, var(--bg-muted));
  color: var(--text-secondary);
  font-size: 11px;
  font-weight: 650;
  letter-spacing: 0.02em;
  padding: 4px 10px;
  cursor: pointer;
  transition: color 160ms ease, background 160ms ease;
}

.dashboard__quick-hide:hover {
  color: var(--text-primary);
  background: color-mix(in srgb, var(--bg-muted) 72%, var(--bg-elevated));
}

.card {
  background: var(--bg-elevated);
  @apply rounded-2xl;
  border: 1px solid var(--border);
  box-shadow: var(--shadow-soft), inset 0 1px 0 color-mix(in srgb, #fff 6%, transparent);
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  transition: transform var(--transition-base), box-shadow var(--transition-base);
}

.card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lift);
}

.card__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 18px 20px 8px;
}

.card__eyebrow {
  text-transform: uppercase;
  font-size: 11px;
  letter-spacing: 0.18em;
  color: var(--text-secondary);
}

.card__title {
  font-size: 20px;
}

.card__body {
  padding: 0 20px 20px;
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

.card--clickable {
  cursor: pointer;
}

.button {
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: 10px;
  padding: 8px 16px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  text-decoration: none;
  line-height: 1;
  cursor: pointer;
  transition: filter var(--transition-base);
}

.button--ghost {
  background: transparent;
  color: var(--text-secondary);
  border: 1px solid var(--border);
}

.button--danger {
  background: #b42318;
  color: #fff;
}

.button:hover {
  filter: brightness(1.05);
}

.board {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 16px;
}

.column-settings {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
  margin-bottom: 12px;
}

.board__column {
  background: var(--bg-muted);
  border-radius: 14px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.board__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.board__list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.task-card {
  background: var(--tasks-card-bg, var(--bg-muted));
  border-radius: 16px;
  border: 1px solid transparent;
  padding: 14px 16px;
  font-family: var(--font-body);
  text-align: left;
  width: 100%;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  gap: 12px;
  transition: border-color 160ms ease, box-shadow 160ms ease, transform var(--transition-base);
}

.task-card:hover {
  border-color: var(--tasks-card-border-hover, rgba(17, 24, 39, 0.14));
  box-shadow: 0 1px 1px rgba(15, 23, 42, 0.06);
}

.task-card:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 3px var(--focus-ring) inset,
    0 1px 1px rgba(15, 23, 42, 0.06);
}

.task-card__top {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 12px;
}

.task-card__title {
  font-family: var(--font-body);
  font-weight: 800;
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.task-card__tags {
  display: flex;
  flex-wrap: nowrap;
  gap: 6px;
  min-width: 0;
}

.task-card__tag.task-tag-chip {
  font-size: 13px;
  font-weight: 500;
  height: 26px;
  padding: 0 10px;
}

.task-card__delete {
  border: none;
  padding: 0;
  width: 32px;
  height: 32px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  opacity: 0;
  background: transparent;
  color: var(--text-secondary);
  transition: opacity 160ms ease, background 160ms ease, color 160ms ease;
}

.task-card:hover .task-card__delete,
.task-card:focus-within .task-card__delete {
  opacity: 1;
}

.task-card__delete:hover {
  background: var(--tasks-card-delete-hover, rgba(255, 255, 255, 0.45));
  color: var(--text-primary);
}

.task-card__delete:focus-visible {
  outline: 3px solid var(--focus-ring);
  outline-offset: 2px;
}

.task-card__bottom {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.task-card__meta {
  display: flex;
  align-items: center;
  gap: 8px;
  font-family: var(--font-body);
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary);
  min-width: 0;
  flex: 1;
}

.task-card__tags--meta {
  margin-left: auto;
  max-width: 46%;
  overflow: hidden;
}

.task-card__tags--meta .task-card__tag.task-tag-chip {
  flex: 0 0 auto;
}

@media (max-width: 1180px) {
  .task-card__tags--meta {
    display: none;
  }
}

.task-card__priority {
  --priority-accent: #94a3b8;
  --priority-text: #6b7280;
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-weight: 700;
  letter-spacing: 0.01em;
  color: var(--priority-text);
  padding-left: 10px;
}

.task-card__priority::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 4px;
  height: 14px;
  border-radius: 999px;
  background: var(--priority-accent);
}

.task-card__priority--high {
  --priority-accent: #ef4444;
  color: #b91c1c;
}

.task-card__priority--medium {
  --priority-accent: #f59e0b;
  color: #b45309;
}

.task-card__priority--low {
  --priority-accent: #3b82f6;
  color: #1d4ed8;
}

.task-card__priority--none {
  --priority-accent: #cbd5e1;
  color: #6b7280;
}

.task-card__due {
  white-space: nowrap;
}

.task-card__actions {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-left: auto;
}

.task-card__progress {
  width: 102px;
  transition: width 120ms ease;
}

.task-card__progress.is-open {
  width: min(320px, 40vw);
}

.task-card__progress-btn {
  width: 100%;
  border-radius: 999px;
  height: 32px;
  min-height: 32px;
  padding: 0 14px;
  font-size: 13px;
  font-weight: 500;
  color: color-mix(in srgb, var(--text-primary) 78%, var(--text-secondary));
  border-color: color-mix(in srgb, var(--border) 82%, transparent);
  background: color-mix(in srgb, var(--bg-elevated) 88%, var(--bg-muted));
}

.task-card__progress-btn:hover {
  color: color-mix(in srgb, var(--text-primary) 84%, var(--text-secondary));
  border-color: color-mix(in srgb, var(--border) 90%, transparent);
  background: color-mix(in srgb, var(--bg-muted) 22%, var(--bg-elevated));
}

.task-card__progress-btn:active {
  color: color-mix(in srgb, var(--text-primary) 88%, var(--text-secondary));
  border-color: color-mix(in srgb, var(--border) 94%, transparent);
  background: color-mix(in srgb, var(--bg-muted) 28%, var(--bg-elevated));
}

.task-card__progress-form {
  width: 100%;
}

.task-card__progress-input {
  width: 100%;
  min-height: 30px;
  max-height: 92px;
  resize: vertical;
  border: 1px solid var(--border);
  border-radius: 14px;
  background: var(--bg-elevated);
  color: var(--text-primary);
  padding: 6px 10px;
  font-family: var(--font-body);
  font-size: 13px;
  line-height: 1.3;
}

.task-card__progress-input:focus-visible {
  outline: none;
  border-color: color-mix(in srgb, var(--accent) 70%, var(--border));
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 24%, transparent);
}

.task-card__status-group {
  gap: 6px;
}

.task-card__status {
  --task-action-bg: color-mix(in srgb, var(--bg-elevated) 88%, var(--bg-muted));
  --task-action-border: color-mix(in srgb, var(--border) 82%, transparent);
  --task-action-text: color-mix(in srgb, var(--text-primary) 78%, var(--text-secondary));
  --task-action-bg-hover: color-mix(in srgb, var(--bg-elevated) 82%, var(--bg-muted));
  --task-action-border-hover: color-mix(in srgb, var(--border) 90%, transparent);
  --task-action-text-hover: color-mix(in srgb, var(--text-primary) 84%, var(--text-secondary));
  --task-action-bg-active: color-mix(in srgb, var(--bg-elevated) 78%, var(--bg-muted));
  --task-action-border-active: color-mix(in srgb, var(--border) 94%, transparent);
  --task-action-text-active: color-mix(in srgb, var(--text-primary) 88%, var(--text-secondary));
  border-radius: 999px;
  height: 30px;
  min-height: 30px;
  padding: 0 14px;
  font-size: 13px;
  font-weight: 500;
  background: var(--task-action-bg);
  border-color: var(--task-action-border);
  color: var(--task-action-text);
  transition: background 140ms ease, border-color 140ms ease, color 140ms ease;
  box-shadow: none;
}

.task-card__status[data-loading='true'] {
  position: relative;
}

.task-card__status[data-loading='true']::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  border: 1px solid color-mix(in srgb, var(--task-action-border) 54%, transparent);
  animation: task-action-pulse 620ms ease-in-out infinite;
}

.task-card__status:disabled {
  opacity: 1;
  background: color-mix(in srgb, var(--bg-elevated) 86%, var(--bg-muted));
  border-color: color-mix(in srgb, var(--border) 70%, transparent);
  color: color-mix(in srgb, var(--text-secondary) 76%, transparent);
  cursor: not-allowed;
  filter: none;
}

.task-card__status--focus {
  min-width: 72px;
  --task-action-bg: color-mix(in srgb, var(--accent) 8%, var(--bg-elevated));
  --task-action-border: color-mix(in srgb, var(--accent) 12%, var(--border));
  --task-action-bg-hover: color-mix(in srgb, var(--accent) 10%, var(--bg-elevated));
  --task-action-border-hover: color-mix(in srgb, var(--accent) 14%, var(--border));
  --task-action-bg-active: color-mix(in srgb, var(--accent) 12%, var(--bg-elevated));
  --task-action-border-active: color-mix(in srgb, var(--accent) 16%, var(--border));
}

.task-card__status.is-success {
  animation: task-action-success 320ms var(--ease-standard);
}

.task-card__status:hover {
  background: var(--task-action-bg-hover);
  border-color: var(--task-action-border-hover);
  color: var(--task-action-text-hover);
}

.task-card__status:active {
  background: var(--task-action-bg-active);
  border-color: var(--task-action-border-active);
  color: var(--task-action-text-active);
}

.task-card__status[data-status-action='start'],
.task-card__status[data-status-action='doing'] {
  --task-action-bg: color-mix(in srgb, var(--status-doing) 8%, var(--bg-elevated));
  --task-action-border: color-mix(in srgb, var(--status-doing) 12%, var(--border));
  --task-action-bg-hover: color-mix(in srgb, var(--status-doing) 10%, var(--bg-elevated));
  --task-action-border-hover: color-mix(in srgb, var(--status-doing) 14%, var(--border));
  --task-action-bg-active: color-mix(in srgb, var(--status-doing) 12%, var(--bg-elevated));
  --task-action-border-active: color-mix(in srgb, var(--status-doing) 16%, var(--border));
}

.task-card__status[data-status-action='done'] {
  --task-action-bg: color-mix(in srgb, var(--status-done) 8%, var(--bg-elevated));
  --task-action-border: color-mix(in srgb, var(--status-done) 12%, var(--border));
  --task-action-bg-hover: color-mix(in srgb, var(--status-done) 10%, var(--bg-elevated));
  --task-action-border-hover: color-mix(in srgb, var(--status-done) 14%, var(--border));
  --task-action-bg-active: color-mix(in srgb, var(--status-done) 12%, var(--bg-elevated));
  --task-action-border-active: color-mix(in srgb, var(--status-done) 16%, var(--border));
}

.task-card__status[data-status-action='todo'],
.task-card__status[data-status-action='reopen'] {
  --task-action-bg: color-mix(in srgb, var(--status-todo) 8%, var(--bg-elevated));
  --task-action-border: color-mix(in srgb, var(--status-todo) 12%, var(--border));
  --task-action-bg-hover: color-mix(in srgb, var(--status-todo) 10%, var(--bg-elevated));
  --task-action-border-hover: color-mix(in srgb, var(--status-todo) 14%, var(--border));
  --task-action-bg-active: color-mix(in srgb, var(--status-todo) 12%, var(--bg-elevated));
  --task-action-border-active: color-mix(in srgb, var(--status-todo) 16%, var(--border));
}

@keyframes task-action-success {
  0% {
    transform: scale(1);
    filter: saturate(1);
  }
  50% {
    transform: scale(1.03);
    filter: saturate(1.12);
  }
  100% {
    transform: scale(1);
    filter: saturate(1);
  }
}

@keyframes task-action-pulse {
  0%,
  100% {
    opacity: 0.2;
  }
  50% {
    opacity: 0.72;
  }
}

@media (max-width: 760px) {
  .task-card__bottom {
    flex-direction: column;
    align-items: stretch;
  }

  .task-card__meta {
    width: 100%;
  }

  .task-card__actions {
    width: 100%;
    justify-content: flex-end;
    flex-wrap: wrap;
  }

  .task-card__progress.is-open {
    width: 100%;
  }
}

.subtask-list {
  display: grid;
  gap: 10px;
  margin-top: 10px;
}

.subtask-item {
  display: grid;
  grid-template-columns: 18px 1fr auto;
  gap: 8px;
  align-items: center;
  font-size: 13px;
}

.subtask-item .button {
  padding: 6px 10px;
  font-size: 13px;
}

.subtask-item input {
  font-size: 13px;
}

.tag {
  padding: 2px 8px;
  @apply rounded-full;
  font-size: 11px;
  text-transform: uppercase;
}

.tag--high {
  background: #f4c7c3;
  color: #7d2a22;
}

.tag--medium {
  background: #f4e2b7;
  color: #6f4c0f;
}

.tag--low {
  background: #dce2e8;
  color: #334155;
}

.drawer {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: var(--z-drawer);
}

.drawer--visible {
  pointer-events: auto;
}

.drawer__backdrop {
  position: absolute;
  inset: 0;
  background: rgba(10, 12, 14, 0.5);
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--motion-duration-medium) var(--ease-accelerate);
  will-change: opacity;
}

.drawer--visible .drawer__backdrop {
  opacity: 1;
  pointer-events: auto;
  transition: opacity var(--motion-duration-slow) var(--ease-decelerate);
}

.drawer__panel {
  position: absolute;
  top: 12px;
  right: 12px;
  bottom: 12px;
  width: min(420px, calc(100vw - 24px));
  height: auto;
  max-height: calc(100vh - 24px);
  background: var(--bg-elevated);
  border: 1px solid var(--border);
  @apply rounded-3xl;
  transform: translate3d(calc(var(--motion-shift-md) * 1.2), 0, 0) scale(0.99);
  opacity: 0;
  transition: transform var(--motion-duration-medium) var(--ease-accelerate),
    opacity var(--motion-duration-medium) var(--ease-accelerate);
  display: flex;
  flex-direction: column;
  padding: 20px;
  box-shadow: var(--shadow-drawer);
  will-change: transform, opacity;
  overflow: visible;
}

.drawer--visible .drawer__panel {
  opacity: 1;
  transition: none;
  animation: drawer-panel-in var(--motion-duration-slow) var(--ease-emphasized) both;
}

html[data-motion='reduce'] .drawer__panel {
  transform: translateZ(0);
  transition: opacity var(--motion-duration-medium) var(--ease-accelerate);
}

html[data-motion='reduce'] .drawer--visible .drawer__panel {
  animation: none;
  transform: translateZ(0);
  opacity: 1;
  transition: opacity var(--motion-duration-slow) var(--ease-decelerate);
}

@keyframes drawer-panel-in {
  0% {
    transform: translate3d(calc(var(--motion-shift-md) * 1.2), 0, 0) scale(0.99);
    opacity: 0;
  }
  70% {
    transform: translate3d(calc(var(--motion-shift-xs) * -1), 0, 0) scale(1.005);
    opacity: 1;
  }
  100% {
    transform: translate3d(0, 0, 0) scale(1);
    opacity: 1;
  }
}

.drawer__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  row-gap: 10px;
  padding: 6px 0 10px;
}

.drawer__content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 16px;
  margin: 10px -6px 0;
  padding: 6px;
  min-height: 0;
  overflow-y: auto;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}

.drawer__content--no-header {
  margin-top: -6px;
}

.drawer__section {
  display: grid;
  gap: 10px;
}

.drawer__footer {
  margin-top: auto;
}

.drawer__footer-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.focus {
  display: flex;
  flex-direction: column;
}

.focus__time {
  font-size: 42px;
  margin: 8px 0 14px;
  font-weight: 700;
  display: flex;
  align-items: center;
  min-height: 60px;
  line-height: 1;
}

.focus__progress {
  height: 6px;
  background: var(--bg-muted);
  border-radius: 999px;
  overflow: hidden;
  transition: opacity 220ms ease;
  opacity: 0;
}

.focus__progress.is-visible {
  opacity: 1;
}

.focus__progress span {
  display: block;
  height: 100%;
  background: var(--accent);
}

.focus__actions {
  margin-top: 14px;
  display: flex;
  gap: 14px;
}

.focus__actions .button {
  flex: 1;
}

.focus__settings {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
  margin-top: 16px;
}

.focus__volume {
  margin-top: 12px;
}

.focus__noise {
  margin-top: 14px;
  display: flex;
  justify-content: space-between;
  gap: 12px;
  align-items: center;
}

.focus__noise-master {
  margin-top: 10px;
  display: grid;
  gap: 6px;
}

.focus__noise-master.is-disabled {
  opacity: 0.5;
}

.focus__noise-meta {
  display: grid;
  gap: 2px;
}

.focus__noise-label {
  font-weight: 600;
}

.noiseBtn.noise-icon-toggle {
  --noise-icon-color: #fff;
  --noise-icon-size: 18px;
  min-width: var(--control-height);
  width: 44px;
  height: var(--control-height);
  padding: 0;
  border-radius: 12px;
  border: 1px solid color-mix(in srgb, var(--accent) 72%, var(--border));
  background: color-mix(in srgb, var(--accent) 88%, var(--bg-muted));
  color: var(--noise-icon-color);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
  cursor: pointer;
}

.noiseBtn.noise-icon-toggle:hover {
  background: color-mix(in srgb, var(--accent) 92%, var(--bg-muted));
}

.noiseBtn.noise-icon-toggle:active {
  background: color-mix(in srgb, var(--accent) 96%, var(--bg-muted));
}

.noise-icon-toggle__play,
.noise-icon-toggle__pause {
  position: absolute;
  width: var(--noise-icon-size);
  height: var(--noise-icon-size);
  fill: currentColor;
  animation: noise-icon-fill 0.5s;
}

.noise-icon-toggle__pause {
  display: none;
}

.noiseBtn.noise-icon-toggle.is-playing .noise-icon-toggle__play {
  display: none;
}

.noiseBtn.noise-icon-toggle.is-playing .noise-icon-toggle__pause {
  display: block;
}

@keyframes noise-icon-fill {
  0% {
    transform: rotate(-180deg) scale(0);
    opacity: 0;
  }
  50% {
    transform: rotate(-10deg) scale(1.2);
  }
}

@media (prefers-reduced-motion: reduce) {
  .noise-icon-toggle__play,
  .noise-icon-toggle__pause {
    animation: none;
  }
}

html[data-motion='reduce'] .noise-icon-toggle__play,
html[data-motion='reduce'] .noise-icon-toggle__pause,
.noiseBtn.noise-icon-toggle.is-reduced-motion .noise-icon-toggle__play,
.noiseBtn.noise-icon-toggle.is-reduced-motion .noise-icon-toggle__pause {
  animation: none;
}

.noise-toggle {
  border: none;
  background: transparent;
  padding: 10px 12px;
  min-width: 44px;
  min-height: 36px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--text-secondary);
  cursor: pointer;
  transition: color var(--transition-base), opacity var(--transition-base);
}

.noise-bars {
  display: inline-flex;
  gap: 3px;
  align-items: flex-end;
}

.noise-bars span {
  width: 3px;
  height: 10px;
  border-radius: 999px;
  background: currentColor;
  opacity: 0.85;
}

.noise-toggle.is-paused {
  opacity: 0.45;
}

.noise-toggle.is-playing .noise-bars span {
  animation: noise-bars-bounce 1.2s ease-in-out infinite;
}

.noise-toggle.is-playing .noise-bars span:nth-child(2) {
  animation-duration: 1.05s;
}

.noise-toggle.is-playing .noise-bars span:nth-child(3) {
  animation-duration: 0.9s;
}

@keyframes noise-bars-bounce {
  0%,
  100% {
    transform: translateY(0);
    opacity: 0.8;
  }
  50% {
    transform: translateY(-3px);
    opacity: 1;
  }
}

.focus-settings__row {
  display: flex;
  justify-content: space-between;
  gap: 12px;
  align-items: center;
}

.focus-settings__number {
  width: 92px;
  text-align: right;
}

.focus-settings__panel {
  border: 1px solid color-mix(in srgb, var(--border) 85%, transparent);
  border-radius: 16px;
  background: color-mix(in srgb, var(--bg-elevated) 82%, var(--bg-muted));
  padding: 14px;
  display: grid;
  gap: 12px;
}

.focus-settings__panelHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.focus-settings__timerList {
  display: grid;
  gap: 10px;
}

.focus-settings__timerItem {
  display: grid;
  gap: 8px;
}

.focus-settings__timePill {
  width: 100%;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--bg-muted);
  min-height: 48px;
  padding: 8px 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
  transition: border-color 180ms ease, background 180ms ease;
}

.focus-settings__timePill:hover {
  border-color: color-mix(in srgb, var(--accent) 22%, var(--border));
  background: color-mix(in srgb, var(--bg-muted) 88%, var(--bg-elevated));
}

.focus-settings__timePill:focus-visible {
  outline: 3px solid var(--focus-ring);
  outline-offset: 2px;
}

.focus-settings__timerLabel {
  font-weight: 600;
}

.focus-settings__timerValue {
  font-size: 24px;
  line-height: 1;
  font-weight: 700;
  color: color-mix(in srgb, var(--text-primary) 92%, var(--accent));
}

.focus-settings__stepper {
  border: 1px solid color-mix(in srgb, var(--border) 85%, transparent);
  border-radius: 12px;
  background: var(--bg-elevated);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 8px;
}

.focus-settings__stepperBtn {
  min-width: 38px;
  min-height: 34px;
  border-radius: 10px;
  padding: 0;
  font-size: 20px;
  font-weight: 500;
}

.focus-settings__stepperValue {
  font-size: 13px;
  font-weight: 700;
  letter-spacing: 0.01em;
  color: var(--text-secondary);
}

.focus-settings__noiseHint {
  margin: 2px 0 0;
  font-size: 12px;
  font-weight: 600;
  color: #9a3412;
}

.focus-noise-panel {
  display: grid;
  gap: 10px;
}

.focus-noise-panel--compact {
  gap: 8px;
}

.focus-noise-panel__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.focus-noise-panel__title {
  margin: 0;
  font-size: 16px;
  font-weight: 700;
}

.focus-noise-panel__playRow {
  display: flex;
  justify-content: flex-end;
}

.focus-noise-bars-wrap {
  padding-inline: 12px;
  margin-top: -1px;
}

.focus-noise-bars {
  display: flex;
  align-items: flex-end;
  gap: 4px;
  width: 100%;
  border-bottom: 1px solid color-mix(in srgb, var(--border) 70%, transparent);
  padding: 8px 0;
}

.focus-noise-bars__bar {
  flex: 1;
  width: 100%;
  min-height: 2px;
  border-radius: 999px;
  height: 24%;
  background: color-mix(in srgb, var(--text-primary) 92%, #111111);
  transform-origin: bottom;
  transition: height 120ms linear;
}

@media (max-width: 760px) {
  .focus-noise-bars {
    gap: 3px;
  }
}

.focus-noise-panel__hint {
  margin: 0;
  font-size: 12px;
  font-weight: 600;
  color: #9a3412;
}

.focus-noise-track {
  border: 0;
  border-radius: 0;
  background: transparent;
  padding: 10px 0;
  border-bottom: 1px solid color-mix(in srgb, var(--border) 75%, transparent);
  transition: background-color 180ms ease, opacity 180ms ease, transform 180ms ease;
}

.focus-noise-track--master {
  margin-bottom: 2px;
  padding-top: 0;
  border-bottom: 1px solid color-mix(in srgb, var(--border) 80%, transparent);
}

.focus-noise-track__top {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  align-items: center;
}

.focus-noise-track__name {
  margin: 0;
  font-weight: 600;
}

.focus-noise-track__value {
  font-size: 12px;
  font-weight: 700;
  color: var(--text-secondary);
}

.focus-noise-track__controls {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.focus-noise-track__slider {
  margin-top: 6px;
}

.focus-noise-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 0;
}

.focus-noise-track--compact {
  padding: 11px 0;
}

.focus-noise-track--compact .focus-noise-track__top {
  gap: 10px;
}

.focus-noise-track[data-enabled='0'] {
  opacity: 0.62;
}

.focus-noise-track[data-enabled='1'] {
  opacity: 1;
}

.focus-noise-track--compact[data-enabled='1']:hover {
  transform: translateX(2px);
}

.focus-noise-grid > .focus-noise-track:last-child {
  border-bottom: 0;
}

.focus-page {
  position: relative;
  min-height: calc(100vh - 76px);
  overflow: visible;
  border-radius: 0;
}

.ambient-background {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}

.ambient-background__layer {
  position: absolute;
  inset: -12%;
  border-radius: 42px;
  opacity: 0.24;
  transform: translateZ(0);
  will-change: transform, opacity;
  animation-play-state: paused;
}

.ambient-background__layer--one {
  background:
    radial-gradient(circle at 18% 30%, color-mix(in srgb, var(--accent) 62%, #22d3ee), transparent 54%),
    radial-gradient(circle at 70% 65%, color-mix(in srgb, #3b82f6 44%, var(--surface)), transparent 58%);
}

.ambient-background__layer--two {
  background:
    radial-gradient(circle at 72% 26%, color-mix(in srgb, #f59e0b 34%, var(--accent)), transparent 44%),
    radial-gradient(circle at 30% 70%, color-mix(in srgb, #22c55e 32%, var(--accent)), transparent 58%);
}

.ambient-background.is-immersive .ambient-background__layer--one {
  animation: focus-breathe-a 4.8s ease-in-out infinite;
}

.ambient-background.is-immersive .ambient-background__layer--two {
  animation: focus-breathe-b 4.4s ease-in-out infinite;
  animation-delay: 0.35s;
}

@keyframes focus-breathe-a {
  0% {
    transform: scale(1);
    opacity: 0.42;
  }
  50% {
    transform: scale(1.03);
    opacity: 0.58;
  }
  100% {
    transform: scale(1);
    opacity: 0.42;
  }
}

@keyframes focus-breathe-b {
  0% {
    transform: scale(1);
    opacity: 0.35;
  }
  50% {
    transform: scale(1.025);
    opacity: 0.52;
  }
  100% {
    transform: scale(1);
    opacity: 0.35;
  }
}

.focus-portal {
  position: relative;
  z-index: 1;
  min-height: calc(100vh - 76px);
  display: grid;
  gap: 14px;
  grid-template-rows: auto 1fr;
}

.focus-portal__veil {
  position: absolute;
  inset: 0;
  border-radius: 20px;
  background: color-mix(in srgb, #020617 18%, transparent);
  z-index: 0;
  pointer-events: none;
  animation: focus-veil-in 220ms ease-out both;
}

@keyframes focus-veil-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.focus-portal__controls {
  position: relative;
  z-index: 2;
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}

.focus-portal__content {
  position: relative;
  z-index: 2;
  display: grid;
  grid-template-columns: minmax(260px, 320px) minmax(0, 1fr) minmax(260px, 320px);
  gap: 14px;
}

.focus-task-selector.card {
  margin: 0;
}

.focus-task-selector .card__body {
  display: grid;
  gap: 14px;
}

.focus-task-selector__grid {
  display: grid;
  gap: 12px;
}

.focus-task-selector__field {
  display: grid;
  gap: 8px;
}

.focus-task-selector__field > span {
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  color: var(--text-secondary);
}

.focus-task-selector__field input[type='text'] {
  border: 1px solid var(--border);
  border-radius: 12px;
  min-height: 42px;
  padding: 0 12px;
  background: var(--bg-elevated);
}

.focus-task-selector__presets {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}

.focus-task-selector__preset {
  min-height: 36px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--bg-muted);
  color: var(--text-secondary);
}

.focus-task-selector__preset.is-active {
  border-color: color-mix(in srgb, var(--accent) 55%, var(--border));
  color: var(--text-primary);
  background: color-mix(in srgb, var(--accent) 30%, var(--bg-elevated));
}

.focus-task-selector__actions {
  display: flex;
}

.focus-task-selector__actions .button {
  width: 100%;
}

.focus-stage {
  border: 0;
  border-radius: 20px;
  background: transparent;
  padding: clamp(16px, 2vw, 26px);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 22px;
  min-height: 100%;
}

.focus-surface-card {
  border: 0 !important;
  background: var(--surface) !important;
  box-shadow:
    0 12px 30px rgba(15, 23, 42, 0.08),
    0 2px 8px rgba(15, 23, 42, 0.05);
}

.focus-surface-card--side {
  box-shadow:
    0 8px 20px rgba(15, 23, 42, 0.06),
    0 1px 4px rgba(15, 23, 42, 0.04);
}

.focus-stage__header h1 {
  margin: 2px 0 4px;
  font-size: clamp(20px, 2.6vw, 30px);
}

.focus-stage__eyebrow {
  margin: 0;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-size: 12px;
  font-weight: 700;
  color: var(--text-secondary);
}

.focus-stage__timer {
  width: min(560px, 100%);
  margin: 0 auto;
  position: relative;
  display: grid;
  gap: 10px;
  justify-items: center;
  align-content: center;
}

.focus-stage__timer--flat {
  padding: 4px 8px;
}

.focus-stage__clock {
  display: grid;
  place-items: center;
  font-size: clamp(36px, 4.8vw, 56px);
  line-height: 1;
  font-weight: 700;
  font-variant-numeric: tabular-nums;
  font-family: 'IBM Plex Sans', 'Avenir Next', 'SF Pro Display', 'Inter', 'Segoe UI', sans-serif;
  letter-spacing: 0.02em;
  color: var(--text-primary);
}

.focus-stage__clock-line {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-wrap: nowrap;
  gap: 4px;
  white-space: nowrap;
}

.focus-stage__clock-line > * {
  display: inline-flex;
  align-items: center;
}

.focus-stage__clock-line span[aria-hidden='true'] {
  margin: 0 2px;
}

.focus-stage__line-progress {
  width: min(520px, 100%);
  height: 5px;
}

.focus-stage__actions {
  display: flex;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 4px;
}

.focus-stage__meta {
  display: grid;
  gap: 6px;
  justify-items: center;
  color: var(--text-secondary);
  font-size: 12px;
}

.focus-history {
  min-height: 100%;
}

.focus-history__filters {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}

.focus-history__select {
  min-height: 36px;
  border: 1px solid color-mix(in srgb, var(--border) 84%, transparent);
  background: var(--bg-elevated);
  color: var(--text-secondary);
}

.focus-history__content {
  min-height: 0;
}

.focus-history__list {
  display: grid;
  gap: 10px;
  max-height: calc(100vh - 260px);
  overflow: auto;
  padding-right: 4px;
}

.focus-history__item {
  border: 1px solid color-mix(in srgb, var(--border) 86%, transparent);
  border-radius: 12px;
  padding: 10px;
  background: color-mix(in srgb, var(--bg-elevated) 88%, transparent);
  display: grid;
  gap: 6px;
}

.focus-history__item-top {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  font-size: 12px;
}

.focus-history__item-bottom {
  font-size: 13px;
  font-weight: 700;
}

.focus-history__status {
  text-transform: capitalize;
  font-weight: 700;
  letter-spacing: 0.01em;
}

.focus-history__status.is-completed {
  color: #0f766e;
}

.focus-history__status.is-interrupted {
  color: #9a3412;
}

.focus-history__status.is-active {
  color: #1d4ed8;
}

.focus-noise-track--compact .focus-noise-track__name {
  font-size: 12px;
}

.focus-noise-track__sliderWrap {
  height: 36px;
  min-height: 36px;
  display: flex;
  align-items: center;
  overflow: visible;
}

.focus-noise-track__sliderWrap.is-disabled {
  opacity: 0.45;
  pointer-events: none;
}

.noise-slider {
  width: 100%;
  height: 20px;
  display: flex;
  align-items: center;
  --noise-accent: #1b4f4a;
  outline: none;
}

.noise-slider:focus-visible .noise-slider__track {
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 35%, transparent);
}

.noise-slider__track {
  position: relative;
  width: 100%;
  height: 6px;
  border-radius: 999px;
  background: var(--bg-muted);
  border: 1px solid color-mix(in srgb, var(--border) 70%, transparent);
}

.noise-slider__fill {
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  border-radius: 999px;
  background: var(--noise-accent);
}

.noise-slider__thumb {
  position: absolute;
  top: 50%;
  width: 14px;
  height: 14px;
  border-radius: 999px;
  background: var(--bg-elevated);
  border: 1px solid color-mix(in srgb, var(--border) 85%, transparent);
  transform: translate(-50%, -50%);
  box-shadow: 0 6px 16px rgba(10, 12, 14, 0.16);
}

.noise-slider--capsule .noise-slider__track {
  height: 9px;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, var(--border) 78%, transparent);
  background: color-mix(in srgb, var(--bg-muted) 92%, #ffffff);
}

.noise-slider--capsule .noise-slider__fill {
  background: linear-gradient(90deg, color-mix(in srgb, var(--accent) 76%, #0f766e) 0%, color-mix(in srgb, #0f766e 84%, #115e59) 100%);
}

.noise-slider--capsule .noise-slider__thumb {
  width: 16px;
  height: 16px;
  background: #ffffff;
  border: 1px solid color-mix(in srgb, var(--border) 76%, transparent);
  box-shadow: 0 6px 14px rgba(15, 23, 42, 0.22);
}

.noise-slider.is-disabled {
  opacity: 0.45;
  cursor: not-allowed;
}

.noise-slider.is-disabled .noise-slider__track {
  cursor: not-allowed;
}

.noise-slider--compact .noise-slider__track {
  height: 5px;
}

.noise-slider--compact .noise-slider__thumb {
  width: 12px;
  height: 12px;
}

.elastic-slider {
  width: 100%;
}

.carousel {
  overflow: hidden;
}

.carousel__track {
  display: flex;
  transition: transform var(--transition-base);
}

.widget-todos-carousel .carousel__track {
  transition: transform 320ms ease;
}

.carousel__item {
  min-width: 100%;
}

.carousel__dots {
  display: flex;
  justify-content: center;
  gap: 6px;
  margin-top: 10px;
}

.carousel__dot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  border: none;
  background: var(--border);
  cursor: pointer;
}

.carousel__dot.is-active {
  background: var(--accent);
}

.tasks {
  height: 100%;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

.tasks__carousel {
  flex: 1;
  min-height: 0;
}

.tasks .carousel {
  height: 100%;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

.tasks .carousel__track {
  flex: 1;
  min-height: 0;
}

.tasks .carousel__item {
  height: 100%;
  min-height: 0;
}

.tasks-fg {
  height: 100%;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

html[data-theme='light'] {
  --tasks-tabs-bg: #eae8e4;
  --tasks-tab-fg: #4b5563;
  --tasks-tab-active-bg: #fff;
  --tasks-tab-active-fg: #111827;
  --tasks-card-bg: #f1efeb;
  --tasks-card-border-hover: rgba(17, 24, 39, 0.14);
  --tasks-card-delete-hover: rgba(255, 255, 255, 0.45);
  --task-drawer-bg: #fff;
  --task-drawer-card-bg: #f5f2ed;
  --task-save-bg: #000;
  --task-save-fg: #fff;
  --sidebar-active-fg: rgba(255, 255, 255, 0.98);
}

html[data-theme='dark'] {
  --tasks-tabs-bg: color-mix(in srgb, var(--bg-muted) 74%, #000);
  --tasks-tab-fg: color-mix(in srgb, var(--text-secondary) 92%, transparent);
  --tasks-tab-active-bg: color-mix(in srgb, var(--bg-elevated) 92%, #000);
  --tasks-tab-active-fg: color-mix(in srgb, var(--text-primary) 92%, transparent);
  --tasks-card-bg: color-mix(in srgb, var(--bg-muted) 66%, #000);
  --tasks-card-border-hover: color-mix(in srgb, var(--border) 90%, transparent);
  --tasks-card-delete-hover: color-mix(in srgb, var(--surface-hover) 64%, transparent);
  --task-drawer-bg: color-mix(in srgb, var(--bg) 94%, #000);
  --task-drawer-card-bg: color-mix(in srgb, var(--bg-muted) 82%, #000);
  --task-save-bg: #fff;
  --task-save-fg: #000;
  --sidebar-active-fg: rgba(255, 255, 255, 0.92);
}

html[data-theme='dark'] .app-shell {
  background: radial-gradient(circle at top left, color-mix(in srgb, var(--accent) 9%, transparent), transparent 52%),
    radial-gradient(circle at 20% 80%, color-mix(in srgb, var(--accent) 6%, transparent), transparent 58%);
}

.tab-motion-group {
  --tab-count: 1;
  --tab-active-index: 0;
  --tab-gap: 0px;
  --tab-pad: 4px;
  position: relative;
  isolation: isolate;
  gap: var(--tab-gap);
}

.tab-motion-group::after {
  content: '';
  position: absolute;
  top: var(--tab-pad);
  bottom: var(--tab-pad);
  left: var(--tab-pad);
  width: calc((100% - (var(--tab-pad) * 2)) / var(--tab-count));
  border-radius: 999px;
  background: var(--tasks-tab-active-bg);
  box-shadow:
    0 3px 12px rgba(17, 24, 39, 0.12),
    0 1px 4px rgba(17, 24, 39, 0.08);
  transform: translateX(calc(var(--tab-active-index) * 100%));
  transition: transform 320ms cubic-bezier(0.22, 1, 0.36, 1);
  will-change: transform;
  z-index: 0;
  pointer-events: none;
}

.tab-motion-group.is-tab-switching {
  animation: tab-group-switch-in 240ms ease-out;
}

.tab-motion-group.is-tab-switching .tab-motion-tab {
  animation: tab-option-fade-in 180ms ease-out backwards;
}

.tab-motion-group.is-tab-switching .tab-motion-tab:nth-child(1) {
  animation-delay: 0.01s;
}

.tab-motion-group.is-tab-switching .tab-motion-tab:nth-child(2) {
  animation-delay: 0.02s;
}

.tab-motion-group.is-tab-switching .tab-motion-tab:nth-child(3) {
  animation-delay: 0.03s;
}

.tab-motion-group.is-tab-switching .tab-motion-tab:nth-child(4) {
  animation-delay: 0.04s;
}

.tab-motion-tab {
  position: relative;
  z-index: 1;
  flex: 1 1 0%;
  min-width: 0;
}

.tab-motion-tab::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: color-mix(in srgb, var(--tasks-tab-active-bg) 35%, transparent);
  opacity: 0;
  transition: opacity var(--motion-duration-fast) var(--ease-standard);
  pointer-events: none;
}

.tab-motion-tab:hover::before {
  opacity: 1;
}

@keyframes tab-group-switch-in {
  from {
    opacity: 0.96;
    transform: scale(0.995);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes tab-option-fade-in {
  from {
    opacity: 0.92;
    transform: translateY(3px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@media (prefers-reduced-motion: reduce) {
  .tab-motion-group::after {
    transition: none;
  }

  .tab-motion-group.is-tab-switching {
    animation: none;
  }

  .tab-motion-group.is-tab-switching .tab-motion-tab {
    animation: none;
  }

  .tab-motion-tab::before {
    transition: none;
  }
}

html[data-motion='reduce'] .tab-motion-group::after {
  transition: none;
}

html[data-motion='reduce'] .tab-motion-group.is-tab-switching,
html[data-motion='reduce'] .tab-motion-group.is-tab-switching .tab-motion-tab {
  animation: none;
}

html[data-motion='reduce'] .tab-motion-tab::before {
  transition: none;
}

.tasks-fg__top {
  flex: 0 0 auto;
}

.tasks-fg__tabs-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.tasks-fg__filters {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 10px;
}

.tasks-fg__tabs {
  background: var(--tasks-tabs-bg);
  border-radius: 999px;
  padding: 4px;
  display: inline-flex;
  gap: 0;
  --tab-count: 3;
}

.tasks-fg__tab {
  border: none;
  background: transparent;
  color: var(--tasks-tab-fg);
  padding: 8px 14px;
  border-radius: 999px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: background var(--motion-duration-fast) var(--ease-standard),
    color var(--motion-duration-fast) var(--ease-standard),
    transform var(--motion-duration-fast) var(--ease-standard);
  transform: translate3d(0, 0, 0);
}

.tasks-fg__tab.is-active {
  background: transparent;
  color: var(--tasks-tab-active-fg);
}

.tasks-fg__tab.is-pressing {
  animation: tab-press-bounce var(--motion-duration-fast) var(--ease-emphasized);
}

.tasks-fg__tab:focus-visible {
  outline: none;
  box-shadow: none;
}

.tasks-fg__sort-label {
  margin-left: auto;
  font-size: 12px;
}

.tasks-fg__select {
  width: 140px;
}

.tasks-fg__select--tag {
  width: 130px;
}

.tasks-fg__select .select__trigger {
  font-size: 13px;
  height: 32px;
  min-height: 32px;
  border-radius: 999px;
}

.tasks-fg__count {
  flex: none;
  min-width: 20px;
  text-align: right;
}

.tasks-fg__view-toggle {
  height: 34px;
  min-height: 34px;
  border-radius: 999px;
  padding: 0 14px;
  font-size: 13px;
  font-weight: 700;
}

.task-calendar {
  margin-top: 12px;
  border: 1px solid color-mix(in srgb, var(--border) 75%, transparent);
  border-radius: 16px;
  background: color-mix(in srgb, var(--bg-muted) 52%, var(--bg-elevated));
  padding: 12px;
}

.task-calendar__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.task-calendar__title {
  margin: 0;
  font-size: 16px;
  font-weight: 700;
}

.task-calendar__actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.task-calendar__action {
  height: 28px;
  min-height: 28px;
  padding: 0 10px;
  border-radius: 10px;
  font-size: 12px;
}

.task-calendar__weekdays {
  margin-top: 10px;
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  gap: 6px;
}

.task-calendar__weekday {
  text-align: center;
  font-size: 11px;
  color: var(--text-secondary);
  font-weight: 600;
}

.task-calendar__grid {
  margin-top: 6px;
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  gap: 6px;
}

.task-calendar__cell {
  min-height: 92px;
  border-radius: 12px;
  border: 1px solid color-mix(in srgb, var(--border) 60%, transparent);
  padding: 6px;
  background: color-mix(in srgb, var(--bg-elevated) 86%, transparent);
  display: flex;
  flex-direction: column;
  gap: 5px;
  cursor: default;
}

.task-calendar__cell.is-outside {
  opacity: 0.55;
}

.task-calendar__cell.is-today {
  border-color: color-mix(in srgb, var(--accent) 55%, transparent);
}

.task-calendar__date {
  font-size: 12px;
  font-weight: 700;
  color: var(--text-secondary);
}

.task-calendar__events {
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-height: 0;
}

.task-calendar__event {
  border: none;
  text-align: left;
  border-radius: 8px;
  padding: 3px 4px;
  display: flex;
  align-items: center;
  gap: 9px;
  font-size: 11px;
  min-width: 0;
  cursor: pointer;
  background: transparent;
  color: var(--text-primary);
}

.task-calendar__event--todo {
  color: color-mix(in srgb, var(--status-todo) 88%, var(--text-primary));
}

.task-calendar__event--doing {
  color: color-mix(in srgb, var(--status-doing) 84%, var(--text-primary));
}

.task-calendar__event--done {
  color: color-mix(in srgb, var(--status-done) 84%, var(--text-primary));
}

.task-calendar__event-dot {
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 999px;
  flex: none;
}

.task-calendar__event-title {
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--text-primary);
}

.task-calendar__dialog {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.task-calendar__dialog-title {
  margin: 0;
  font-weight: 700;
}

.task-calendar__dialog-meta {
  margin: -6px 0 0;
}

.task-calendar__field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.task-calendar__field span {
  font-size: 12px;
  color: var(--text-secondary);
}

.tasks-fg__list {
  flex: 1;
  min-height: 0;
  overflow: auto;
  padding: 2px 2px 12px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}

.tasks-fg__list-wrap {
  flex: 1;
  min-height: 0;
}

.tasks-fg__viewport {
  flex: 1;
  min-height: 0;
  overflow: hidden;
  margin-top: 14px;
}

.tasks-fg__track {
  height: 100%;
  display: flex;
  transition: transform var(--motion-duration-medium) var(--ease-emphasized);
  will-change: transform;
  transform: translate3d(0, 0, 0);
}

.tasks-fg__panel {
  min-width: 100%;
  height: 100%;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

html[data-motion='reduce'] .tasks-fg__track {
  transition: none;
}

.tasks-fg__empty {
  flex: 1;
  min-height: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}

.tasks-fg__composer {
  flex: none;
  margin-top: 10px;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px;
  border-radius: 16px;
  background: color-mix(in srgb, var(--bg-muted) 70%, var(--bg-elevated));
  border: 1px solid color-mix(in srgb, var(--border) 70%, transparent);
}

.tasks-fg__composer input {
  background: var(--surface);
  border-color: color-mix(in srgb, var(--border) 86%, transparent);
  color: var(--text-primary);
}

.tasks-fg__composer input::placeholder {
  color: color-mix(in srgb, var(--text-secondary) 84%, transparent);
}

.tasks-fg__add-btn {
  height: var(--control-height);
  min-height: var(--control-height);
  border-radius: 12px;
  padding: 0 14px;
}

.tasks-fg__input.is-shaking {
  animation: widget-todos-shake 320ms ease;
}

@media (max-width: 900px) {
  .task-calendar {
    padding: 10px;
  }

  .task-calendar__cell {
    min-height: 84px;
  }

  .task-calendar__event-kind {
    display: none;
  }
}

.task-fg {
  background: var(--task-drawer-bg);
  --task-form-font-size: 13px;
  --task-form-height: 34px;
  --task-form-radius: 12px;
  --task-form-focus: color-mix(in srgb, var(--accent) 18%, transparent);
  color: var(--text-primary);
  margin: -6px;
  padding: 18px;
  min-height: calc(100% + 12px);
  display: flex;
  flex-direction: column;
}

.task-fg__header {
  flex: 0 0 auto;
}

.task-detail-dialog__panel.dialog__panel {
  width: min(720px, 92vw);
  max-height: min(88vh, 920px);
}

.task-detail-dialog__meta {
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  font-size: 12px;
  font-weight: 600;
}

.task-fg__title {
  margin: 0 0 14px;
  font-family: var(--font-display);
  font-size: 28px;
  line-height: 1.1;
  font-weight: 800;
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.task-fg__title-accent {
  color: var(--text-primary);
}

.task-fg__toolbar {
  display: flex;
  align-items: center;
  gap: 12px;
}

.task-fg__actions {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 10px;
  margin-left: auto;
}

.task-fg__action.button,
.task-fg__save-btn.button {
  border-radius: 999px;
  height: 32px;
  min-height: 32px;
  padding: 0 16px;
  font-family: var(--font-body);
  font-size: 13px;
  font-weight: 600;
}

.task-fg__save-btn.button {
  background: var(--task-save-bg);
  color: var(--task-save-fg);
}

.task-fg__save-btn.button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  filter: none;
}

.task-fg__icon-btn {
  width: 34px;
  height: 34px;
  border-radius: 999px;
  border: none;
  background: transparent;
  color: var(--text-secondary);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: background 160ms ease, color 160ms ease;
  flex: none;
}

.task-fg__icon-btn:hover {
  background: var(--tasks-tabs-bg);
  color: var(--text-primary);
}

.task-fg__content {
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
  gap: 14px;
  margin-top: 18px;
}

.task-fg__card {
  background: var(--task-drawer-card-bg);
  border-radius: 16px;
  padding: 16px;
  border: 1px solid transparent;
  transition: border-color 160ms ease;
}

.task-fg__card:focus-within {
  border-color: transparent;
}

.task-fg__section-title {
  margin: 0 0 12px;
  font-size: 12px;
  font-weight: 800;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: var(--text-secondary);
}

.task-fg__fields {
  display: grid;
  gap: 10px;
}

.task-fg__field {
  display: grid;
  gap: 6px;
}

.task-fg__label {
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--text-secondary);
}

.task-fg input:not([type='checkbox']),
.task-fg textarea,
.task-fg .select__trigger,
.task-fg .date-picker-trigger,
.task-fg .task-tag-select__trigger {
  height: var(--task-form-height);
  min-height: var(--task-form-height);
  border-radius: var(--task-form-radius);
  padding: 0 12px;
  border: 1px solid var(--border);
  background: var(--surface);
  font-family: var(--font-body);
  font-size: var(--task-form-font-size);
  line-height: 1.2;
}

.task-fg .date-picker-trigger {
  justify-content: space-between;
}

.task-fg .task-tag-select__trigger {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
}

.task-fg .date-picker-trigger__input,
.task-fg .select__value-label,
.task-fg .select__placeholder,
.task-fg .task-tag-select__trigger {
  font-size: var(--task-form-font-size);
  font-family: var(--font-body);
  font-weight: 600;
}

.task-fg .date-picker-trigger__input::placeholder,
.task-fg input::placeholder,
.task-fg textarea::placeholder {
  font-size: var(--task-form-font-size);
}

.task-fg input:not([type='checkbox']):focus-visible,
.task-fg textarea:focus-visible,
.task-fg .select__trigger:focus-visible,
.task-fg .select__trigger[data-state='open'],
.task-fg .date-picker-trigger:focus-visible,
.task-fg .date-picker-trigger.is-open,
.task-fg .task-tag-select__trigger:focus-visible,
.task-fg .task-tag-select__trigger[data-state='open'],
.task-fg .task-tag-select__trigger.is-open {
  outline: none;
  border-color: color-mix(in srgb, var(--accent) 70%, var(--border));
  box-shadow: 0 0 0 3px var(--task-form-focus);
}

.task-fg__textarea {
  min-height: 88px;
  resize: vertical;
  padding: 10px 12px;
}

.task-priority-value {
  --priority-accent: #cbd5e1;
  --priority-text: #6b7280;
  position: relative;
  display: inline-flex;
  align-items: center;
  min-height: 18px;
  padding-left: 12px;
  color: var(--priority-text);
  font-weight: 700;
}

.task-priority-value::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 4px;
  height: 14px;
  border-radius: 999px;
  background: var(--priority-accent);
}

.task-priority-value--high,
.task-priority-option--high {
  --priority-accent: #ef4444;
  color: #b91c1c;
}

.task-priority-value--medium,
.task-priority-option--medium {
  --priority-accent: #f59e0b;
  color: #b45309;
}

.task-priority-value--low,
.task-priority-option--low {
  --priority-accent: #3b82f6;
  color: #1d4ed8;
}

.task-priority-value--none,
.task-priority-option--none {
  --priority-accent: #cbd5e1;
  color: #6b7280;
}

.task-priority-option.select__option {
  justify-content: flex-start;
  text-align: left;
  padding-left: 14px;
}

.task-priority-option .select__option-text {
  justify-items: start;
  text-align: left;
}

.task-priority-option .select__option-label {
  position: relative;
  display: inline-flex;
  align-items: center;
  min-height: 18px;
  padding-left: 12px;
  color: inherit;
  font-weight: 700;
}

.task-priority-option .select__option-label::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 4px;
  height: 14px;
  border-radius: 999px;
  background: var(--priority-accent);
}

.task-priority-option--high .select__option-label {
  color: #b91c1c !important;
}

.task-priority-option--medium .select__option-label {
  color: #b45309 !important;
}

.task-priority-option--low .select__option-label {
  color: #1d4ed8 !important;
}

.task-priority-option--none .select__option-label {
  color: #6b7280 !important;
}

.task-tag-select__value {
  min-width: 0;
  display: flex;
  align-items: center;
  gap: 6px;
  overflow: hidden;
}

.task-tag-select__empty {
  display: inline-block;
  width: 10px;
  height: 1px;
}

.task-tag-select__panel.popover-content {
  width: min(360px, calc(100vw - 64px));
  border-radius: 14px;
  padding: 10px;
}

.task-tag-select__options {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.task-tag-select__option {
  border: none;
  background: transparent;
  border-radius: 999px;
  cursor: pointer;
  padding: 0;
  transition: transform var(--transition-base), filter var(--transition-base);
  outline: none;
}

.task-tag-select__option:hover {
  transform: translateY(-1px);
  filter: brightness(0.98);
}

.task-tag-select__option.is-selected .task-tag-chip {
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--accent) 45%, transparent) inset;
}

.task-tag-select__option:focus-visible {
  outline: none;
}

.task-tag-select__composer {
  margin-top: 10px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.task-tag-select__composer input {
  height: 32px;
  min-height: 32px;
  border-radius: 10px;
  padding: 0 10px;
  background: var(--bg);
}

.task-tag-select__add.button {
  height: 32px;
  min-height: 32px;
  border-radius: 10px;
  padding: 0 10px;
  font-size: 12px;
  font-weight: 600;
}

.task-tag-chip {
  height: 24px;
  display: inline-flex;
  align-items: center;
  border-radius: 999px;
  padding: 0 10px;
  font-size: 12px;
  font-weight: 600;
  white-space: nowrap;
}

.task-tag-chip--work {
  background: #e1ecff;
  color: #2e4a8c;
}

.task-tag-chip--life {
  background: #ffe6ec;
  color: #8f2f53;
}

.task-tag-chip--health {
  background: #ddf6e6;
  color: #1f7a43;
}

.task-tag-chip--study {
  background: #efe7ff;
  color: #5f4493;
}

.task-tag-chip--finance {
  background: #fcefdc;
  color: #865414;
}

.task-tag-chip--family {
  background: #e5f5f2;
  color: #1b5f59;
}

.task-tag-chip--custom {
  background: #eceef2;
  color: #475467;
}

.task-tag-chip--count {
  background: #eef0f3;
  color: #556070;
}

.task-fg__subtasks {
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-height: 68px;
}

.task-fg__subtasks.is-empty {
  justify-content: flex-end;
}

.task-fg__subtask-list {
  display: grid;
  gap: 10px;
}

.task-fg__subtask-row {
  display: grid;
  grid-template-columns: 18px 1fr auto;
  gap: 10px;
  align-items: center;
}

.task-fg__subtask-row input[type='checkbox'] {
  margin: 0;
}

.task-fg__subtask-remove.button {
  padding: 0 12px;
  height: 32px;
  min-height: 32px;
  border-radius: 999px;
  font-family: var(--font-body);
  font-size: 12px;
  font-weight: 600;
}

.task-fg__add-subtask.button {
  margin-top: 10px;
  border-radius: 999px;
  height: 32px;
  min-height: 32px;
}

.task-fg__composer {
  margin-top: auto;
}

.task-fg__composer input {
  background: var(--bg-elevated);
}

.task-fg__composer .task-fg__input {
  font-size: 13px;
  font-weight: 600;
}

.task-fg__composer .task-fg__add-btn.button {
  font-family: var(--font-body);
  font-size: 13px;
  font-weight: 600;
}

.task-detail-dialog__empty {
  margin: 0;
}

.task-detail-dialog__log-list {
  margin: 0;
  padding: 0;
  list-style: none;
  display: grid;
  gap: 10px;
}

.task-detail-dialog__log-item {
  border: 1px solid color-mix(in srgb, var(--border) 82%, transparent);
  border-radius: 12px;
  background: color-mix(in srgb, var(--bg-elevated) 80%, var(--bg));
  padding: 10px 12px;
  display: grid;
  gap: 6px;
}

.task-detail-dialog__log-item p {
  margin: 0;
  font-size: 13px;
  line-height: 1.45;
  white-space: pre-wrap;
}

.task-detail-dialog__log-item span {
  font-size: 12px;
}

.task-fg__confirm-text {
  margin: 0 0 16px;
  color: var(--text-secondary);
}

.task-fg__confirm-actions {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.toast-viewport {
  position: fixed;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  display: grid;
  gap: 10px;
  z-index: 9999;
  width: min(520px, calc(100vw - 24px));
  pointer-events: none;
}

.toast {
  pointer-events: auto;
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 12px;
  align-items: start;
  padding: 12px 12px 12px 14px;
  border-radius: 14px;
  background: var(--task-drawer-card-bg);
  border: 1px solid color-mix(in srgb, var(--text-primary) 14%, transparent);
  box-shadow: 0 10px 26px rgba(0, 0, 0, 0.14);
}

.toast__title {
  font-weight: 800;
  margin-bottom: 2px;
}

.toast__message {
  color: var(--text-secondary);
}

.toast__action {
  margin-top: 6px;
  height: 28px;
  width: fit-content;
  padding: 0 10px;
}

.toast__close {
  width: 28px;
  height: 28px;
  border-radius: 999px;
  border: none;
  background: transparent;
  color: var(--text-secondary);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: background 160ms ease, color 160ms ease;
}

.toast__close:hover {
  background: color-mix(in srgb, var(--text-primary) 10%, transparent);
  color: var(--text-primary);
}

.toast--error {
  border-color: color-mix(in srgb, #ef4444 45%, transparent);
}

.toast--success {
  border-color: color-mix(in srgb, #22c55e 42%, transparent);
}

.tasks-page {
  height: 100%;
  display: flex;
  flex-direction: column;
  min-height: 0;
  gap: 10px;
}

.tasks-page-shell__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.tasks-page-shell__title {
  margin: 0;
  font-size: 22px;
  line-height: 1;
}

.tasks-page-shell__switch {
  background: var(--tasks-tabs-bg);
  border-radius: 999px;
  padding: 4px;
  display: inline-flex;
  gap: 0;
  --tab-count: 2;
}

.tasks-page-shell__tab {
  border: none;
  background: transparent;
  color: var(--tasks-tab-fg);
  padding: 8px 14px;
  border-radius: 999px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
}

.tasks-page-shell__tab.is-active {
  color: var(--tasks-tab-active-fg);
}

.tasks-page-shell__panel {
  flex: 1;
  min-height: 0;
}

.tasks-page-shell__list-placeholder {
  height: 100%;
  border: 1px solid color-mix(in srgb, var(--border) 75%, transparent);
  border-radius: 16px;
  background: color-mix(in srgb, var(--bg-muted) 48%, var(--bg-elevated));
  padding: 18px;
}

.tasks-page-shell__list-placeholder h2 {
  margin: 0;
  font-size: 16px;
}

.tasks-page-shell__list-placeholder p {
  margin-top: 8px;
}

.tasks-board-surface {
  height: 100%;
  min-height: 0;
  display: flex;
  flex-direction: column;
  border: 1px solid color-mix(in srgb, var(--border) 75%, transparent);
  border-radius: 16px;
  background: color-mix(in srgb, var(--bg-muted) 30%, var(--bg-elevated));
  padding: 14px;
}

.tasks-board-surface__header {
  flex: none;
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 10px;
}

.tasks-board-surface__header .card__title {
  margin: 0;
  font-size: 18px;
}

.tasks-board-surface__header .tasks-fg__view-toggle {
  margin-left: auto;
}

.tasks-fg--plain {
  border-top: 1px solid color-mix(in srgb, var(--border) 68%, transparent);
  padding-top: 12px;
}

.tasks-page__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
}

.tasks-page__left {
  display: flex;
  align-items: center;
  gap: 12px;
  min-width: 0;
}

.tasks-page__select {
  width: 140px;
}

.tasks-page__sort-label {
  font-size: 12px;
}

.tasks-page__select .select__trigger {
  font-size: 13px;
}

.tasks-page__header .select__option {
  font-size: 12px;
}

.tasks-page__count {
  flex: none;
}

.tasks-list {
  margin-top: 10px;
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  overflow-x: visible;
  padding: 4px;
  display: flex;
  flex-direction: column;
}

.task-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 8px;
  border-radius: 12px;
  cursor: pointer;
}

.task-row:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: -2px;
}

.task-row:hover {
  background: var(--bg-muted);
}

.task-row__delete {
  width: 22px;
  height: 22px;
  border-radius: 999px;
  border: none;
  background: transparent;
  color: var(--text-secondary);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--transition-base), color var(--transition-base);
}

.task-row:hover .task-row__delete,
.task-row:focus-within .task-row__delete {
  opacity: 1;
  pointer-events: auto;
}

.task-row__delete:hover {
  color: #d32f2f;
}

.task-row__title {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-weight: 600;
}

.task-row__due {
  width: 110px;
  text-align: right;
}

.task-row__status {
  padding: 6px 10px;
}

.fade-content {
  animation: fade-up var(--motion-duration-slow) var(--ease-emphasized);
}

@keyframes fade-up {
  from {
    opacity: 0;
    transform: translateY(var(--motion-shift-sm));
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.widget-todos-card {
  position: relative;
  height: 100%;
  min-height: 0;
  display: flex;
  flex-direction: column;
  gap: 12px;
  overflow: hidden;
}

.widget-todos__completed {
  font-size: 12px;
  color: var(--text-secondary);
  white-space: nowrap;
}

.widget-todos__tabs {
  background: var(--tasks-tabs-bg);
  border-radius: 999px;
  padding: 4px;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0;
  --tab-count: 3;
}

.widget-todos__tab {
  border: none;
  background: transparent;
  color: var(--tasks-tab-fg);
  padding: 8px 0;
  border-radius: 999px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: background var(--motion-duration-fast) var(--ease-standard),
    color var(--motion-duration-fast) var(--ease-standard),
    transform var(--motion-duration-fast) var(--ease-standard);
  transform: translate3d(0, 0, 0);
}

.widget-todos__tab.is-active {
  background: transparent;
  color: var(--tasks-tab-active-fg);
}

.widget-todos__tab.is-pressing {
  animation: tab-press-bounce var(--motion-duration-fast) var(--ease-emphasized);
}

.widget-todos__tab:focus-visible {
  outline: none;
  box-shadow: none;
}

.widget-todos__viewport {
  flex: 1;
  min-height: 0;
  overflow: hidden;
  display: flex;
}

.widget-todos__track {
  height: 100%;
  display: flex;
  transition: transform var(--motion-duration-medium) var(--ease-emphasized);
  will-change: transform;
  transform: translate3d(0, 0, 0);
}

.widget-todos__panel {
  min-width: 100%;
  height: 100%;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

html[data-motion='reduce'] .widget-todos__track {
  transition: none;
}

.widget-todos__list {
  flex: 1;
  min-height: 0;
  overflow: auto;
  padding: 2px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}

.widget-todos__list-wrap {
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

.widget-todos__item {
  display: grid;
  grid-template-columns: 18px 1fr 32px;
  align-items: center;
  gap: 10px;
  background: color-mix(in srgb, var(--bg-elevated) 84%, var(--bg-muted));
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid color-mix(in srgb, var(--border) 84%, transparent);
  cursor: pointer;
  user-select: none;
  transition: background 180ms ease, border-color 180ms ease, box-shadow 180ms ease;
}

.widget-todos__item:hover {
  background: color-mix(in srgb, var(--bg-muted) 72%, var(--bg-elevated));
  border-color: color-mix(in srgb, var(--border) 96%, transparent);
  box-shadow: 0 1px 2px color-mix(in srgb, #000 8%, transparent);
}

.widget-todos__item input[type='checkbox'] {
  margin: 0;
  width: 18px;
  height: 18px;
  min-height: 18px;
  padding: 0;
  appearance: none;
  -webkit-appearance: none;
  border-radius: 6px;
  border: 1px solid color-mix(in srgb, var(--accent) 45%, var(--border));
  background: color-mix(in srgb, #fff 90%, var(--bg-muted));
  cursor: pointer;
  position: relative;
  display: inline-grid;
  place-content: center;
  transition: border-color 180ms ease, background-color 180ms ease;
}

.widget-todos__item input[type='checkbox']::before,
.widget-todos__item input[type='checkbox']::after {
  content: '';
  position: absolute;
  height: 2px;
  width: 0;
  top: 10px;
  background: var(--accent);
  border-radius: 2px;
  box-shadow: none;
  clip-path: none;
  transform: rotate(0deg);
}

.widget-todos__item input[type='checkbox']::before {
  right: 58%;
  transform-origin: right bottom;
}

.widget-todos__item input[type='checkbox']::after {
  left: 42%;
  transform-origin: left bottom;
}

.widget-todos__item input[type='checkbox']:checked {
  border-color: color-mix(in srgb, var(--accent) 70%, var(--border));
  background: color-mix(in srgb, var(--accent) 8%, #fff);
}

.widget-todos__item input[type='checkbox']:checked::before {
  animation: widget-check-01 0.4s ease forwards;
}

.widget-todos__item input[type='checkbox']:checked::after {
  animation: widget-check-02 0.4s ease forwards;
}

.widget-todos__item input[type='checkbox']:checked + .widget-todos__title {
  color: color-mix(in srgb, var(--text-secondary) 86%, transparent);
  animation: widget-title-move 0.3s ease 0.1s forwards;
}

.widget-todos__item input[type='checkbox']:checked + .widget-todos__title::before {
  background: color-mix(in srgb, var(--text-secondary) 86%, transparent);
  animation: widget-title-slice 0.4s ease forwards;
}

.widget-todos__item input[type='checkbox']:checked + .widget-todos__title::after {
  animation: widget-title-firework 0.5s ease forwards 0.1s;
}

@keyframes widget-check-01 {
  0% {
    width: 4px;
    top: 10px;
    transform: rotate(0deg);
  }
  50% {
    width: 0;
    top: 10px;
    transform: rotate(0deg);
  }
  51% {
    width: 0;
    top: 9px;
    transform: rotate(45deg);
  }
  100% {
    width: 5px;
    top: 9px;
    transform: rotate(45deg);
  }
}

@keyframes widget-check-02 {
  0% {
    width: 4px;
    top: 10px;
    transform: rotate(0deg);
  }
  50% {
    width: 0;
    top: 10px;
    transform: rotate(0deg);
  }
  51% {
    width: 0;
    top: 9px;
    transform: rotate(-45deg);
  }
  100% {
    width: 10px;
    top: 9px;
    transform: rotate(-45deg);
  }
}

@keyframes widget-title-move {
  50% {
    padding-left: 8px;
    padding-right: 0;
  }
  100% {
    padding-right: 4px;
  }
}

@keyframes widget-title-slice {
  60% {
    width: 100%;
    left: 4px;
  }
  100% {
    width: 100%;
    left: -2px;
    padding-left: 0;
  }
}

@keyframes widget-title-firework {
  0% {
    opacity: 1;
    box-shadow:
      0 0 0 -2px var(--accent),
      0 0 0 -2px var(--accent),
      0 0 0 -2px var(--accent),
      0 0 0 -2px var(--accent),
      0 0 0 -2px var(--accent),
      0 0 0 -2px var(--accent);
  }
  30% {
    opacity: 1;
  }
  100% {
    opacity: 0;
    box-shadow:
      0 -15px 0 0 var(--accent),
      14px -8px 0 0 var(--accent),
      14px 8px 0 0 var(--accent),
      0 15px 0 0 var(--accent),
      -14px 8px 0 0 var(--accent),
      -14px -8px 0 0 var(--accent);
  }
}

@media (prefers-reduced-motion: reduce) {
  .widget-todos__item input[type='checkbox'] {
    transition: none;
  }

  .widget-todos__item input[type='checkbox']:checked::before,
  .widget-todos__item input[type='checkbox']:checked::after {
    animation: none;
  }

  .widget-todos__item input[type='checkbox']:checked::before {
    width: 5px;
    top: 9px;
    transform: rotate(45deg);
  }

  .widget-todos__item input[type='checkbox']:checked::after {
    width: 10px;
    top: 9px;
    transform: rotate(-45deg);
  }

  .widget-todos__item input[type='checkbox']:checked + .widget-todos__title,
  .widget-todos__item input[type='checkbox']:checked + .widget-todos__title::before,
  .widget-todos__item input[type='checkbox']:checked + .widget-todos__title::after {
    animation: none;
  }
}

html[data-motion='reduce'] .widget-todos__item input[type='checkbox'] {
  transition: none;
}

html[data-motion='reduce'] .widget-todos__item input[type='checkbox']:checked::before,
html[data-motion='reduce'] .widget-todos__item input[type='checkbox']:checked::after {
  animation: none;
}

html[data-motion='reduce'] .widget-todos__item input[type='checkbox']:checked::before {
  width: 5px;
  top: 9px;
  transform: rotate(45deg);
}

html[data-motion='reduce'] .widget-todos__item input[type='checkbox']:checked::after {
  width: 10px;
  top: 9px;
  transform: rotate(-45deg);
}

html[data-motion='reduce'] .widget-todos__item input[type='checkbox']:checked + .widget-todos__title,
html[data-motion='reduce'] .widget-todos__item input[type='checkbox']:checked + .widget-todos__title::before,
html[data-motion='reduce'] .widget-todos__item input[type='checkbox']:checked + .widget-todos__title::after {
  animation: none;
}

.widget-todos__delete {
  border: none;
  padding: 0;
  width: 32px;
  height: 32px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  opacity: 0;
  pointer-events: none;
  background: transparent;
  color: var(--text-secondary);
  transition: opacity 160ms ease, background 160ms ease, color 160ms ease;
}

.widget-todos__item:hover .widget-todos__delete {
  opacity: 1;
  pointer-events: auto;
}

.widget-todos__delete:hover {
  background: var(--tasks-card-delete-hover, rgba(255, 255, 255, 0.45));
  color: var(--text-primary);
}

.widget-todos__delete:focus-visible {
  outline: 3px solid var(--focus-ring);
  outline-offset: 2px;
}

.widget-todos__title {
  position: relative;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  text-align: center;
  font-weight: 600;
  color: var(--text-primary);
  transition: color 0.3s ease;
}

.widget-todos__title::before,
.widget-todos__title::after {
  content: '';
  position: absolute;
}

.widget-todos__title::before {
  height: 2px;
  width: 8px;
  left: 0;
  top: 50%;
  background: var(--accent);
  border-radius: 2px;
  transform: translateY(-50%);
  opacity: 0;
}

.widget-todos__title::after {
  height: 4px;
  width: 4px;
  top: 50%;
  left: 2px;
  border-radius: 50%;
  transform: translateY(-50%);
  opacity: 0;
}

.widget-todos__item.is-done {
  opacity: 0.78;
}

.widget-todos__item.is-done .widget-todos__title {
  text-decoration: line-through;
}

.widget-todos__item.is-done .widget-todos__title::before,
.widget-todos__item.is-done .widget-todos__title::after {
  opacity: 1;
}

.widget-todos__composer {
  flex: none;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px;
  border-radius: 16px;
  background: color-mix(in srgb, var(--bg-muted) 70%, var(--bg-elevated));
  border: 1px solid color-mix(in srgb, var(--border) 82%, transparent);
}

.widget-todos__composer input {
  background: var(--surface);
  border-color: color-mix(in srgb, var(--border) 86%, transparent);
  color: var(--text-primary);
}

.widget-todos__composer input::placeholder {
  color: color-mix(in srgb, var(--text-secondary) 84%, transparent);
}

.widget-todos__add-btn {
  height: var(--control-height);
  min-height: var(--control-height);
  border-radius: 12px;
  padding: 0 14px;
}

.widget-todos__input.is-shaking {
  animation: widget-todos-shake 320ms ease;
}

@keyframes widget-todos-shake {
  0% {
    transform: translateX(0);
  }
  20% {
    transform: translateX(-6px);
  }
  40% {
    transform: translateX(6px);
  }
  60% {
    transform: translateX(-4px);
  }
  80% {
    transform: translateX(4px);
  }
  100% {
    transform: translateX(0);
  }
}

.diary__list {
  display: grid;
  gap: 8px;
  margin-top: 16px;
}

.diary__list--scroll {
  margin-top: 0;
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding-bottom: 20px;
}

.diary__history {
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0;
}

.diary__history-header {
  position: sticky;
  top: 0;
  z-index: 2;
  background: var(--bg-elevated);
  padding: 2px 0 10px;
}

.diary__history-title {
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--text-secondary);
}

.diary__history-body {
  flex: 1;
  min-height: 0;
}

.diary-panel__content {
  transition: max-height var(--transition-base);
  overflow: hidden;
  overflow-x: visible;
}

.diary-panel__view {
  height: 100%;
  min-height: 0;
}

.diary-panel__content[data-view='today'] {
  max-height: 900px;
}

.diary-panel__content[data-view='history'] {
  max-height: 720px;
}

.diary-panel__content[data-view='trash'] {
  max-height: 720px;
}

html[data-motion='reduce'] .diary-panel__content {
  transition: none;
}

.diary-panel__editor {
  display: flex;
  flex-direction: column;
  gap: 10px;
  height: 100%;
  min-height: 0;
  position: relative;
}

.diary__editor {
  flex: 1;
  min-height: 240px;
  resize: none;
}

.diary__editor--with-status {
  padding-bottom: 32px;
}

.diary__header-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  width: 100%;
}

.diary__header-left {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

.drawer__header .diary__header-actions + .button {
  display: none;
}

.diary__close {
  width: 30px;
  height: 30px;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.segmented {
  display: inline-flex;
  align-items: center;
  border-radius: 999px;
  background: var(--tasks-tabs-bg);
  padding: 4px;
  gap: 4px;
}

.segmented__button {
  border: none;
  background: transparent;
  color: var(--tasks-tab-fg);
  padding: 8px 14px;
  border-radius: 999px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: background var(--motion-duration-fast) var(--ease-standard),
    color var(--motion-duration-fast) var(--ease-standard),
    transform var(--motion-duration-fast) var(--ease-standard);
  transform: translate3d(0, 0, 0);
}

.segmented__button.is-active {
  background: var(--tasks-tab-active-bg);
  color: var(--tasks-tab-active-fg);
}

.segmented__button.is-pressing {
  animation: tab-press-bounce var(--motion-duration-fast) var(--ease-emphasized);
}

.segmented__button:focus-visible {
  outline: none;
  box-shadow: none;
}

.diary__row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  min-width: 0;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--bg-muted);
}

.diary__row--active {
  border-color: var(--accent);
  box-shadow: 0 0 0 1px color-mix(in srgb, var(--accent) 35%, transparent);
}

.diary__row--muted {
  opacity: 0.65;
}

.diary__row-main {
  display: flex;
  flex-direction: column;
  gap: 2px;
  text-align: left;
  background: transparent;
  border: none;
  padding: 0;
  cursor: pointer;
  flex: 1;
  min-width: 0;
}

.diary__row-main--single {
  flex-direction: row;
  align-items: center;
  gap: 8px;
}

.diary__row-date {
  font-weight: 600;
  font-size: 13px;
  white-space: nowrap;
  flex: 0 0 auto;
}

.diary__row-preview {
  font-size: 12px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
  min-width: 0;
}

.diary__icon-button {
  border: none;
  background: transparent;
  color: var(--text-secondary);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border-radius: 8px;
  cursor: pointer;
  flex: 0 0 auto;
}

.diary__icon-button--delete {
  width: 32px;
  height: 32px;
}

.diary__icon-button:hover {
  background: var(--bg-elevated);
  color: var(--text-primary);
}

.diary__trash-row {
  background: var(--bg-elevated);
}

.diary__trash-row--expired {
  opacity: 0.55;
}

.diary__trash-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.diary__detail {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.diary__detail-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.diary__detail-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.diary__detail-body {
  display: grid;
  gap: 12px;
}

.diary__save {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--text-secondary);
  position: absolute;
  right: 12px;
  bottom: 10px;
  background: var(--bg-elevated);
  padding: 2px 6px;
  border-radius: 999px;
  border: 1px solid var(--border);
}

.diary__save-dot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: var(--text-secondary);
}

.diary__save-dot--saving {
  background: var(--text-secondary);
}

.diary__save-dot--saved {
  background: var(--accent);
}

.diary__date {
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--text-secondary);
  margin: 0 0 6px;
}

.diary__status {
  margin: 0;
  font-size: 14px;
  color: var(--text-primary);
}

.diary__preview {
  margin: 6px 0 0;
  font-size: 12px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.diary__item {
  text-align: left;
  background: var(--bg-muted);
  border: none;
  border-radius: 10px;
  padding: 8px 12px;
  cursor: pointer;
}

.diary__editor {
  min-height: 240px;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--bg-muted);
}

.markdown-preview {
  padding: 12px;
  border-radius: 10px;
  border: 1px dashed var(--border);
  background: var(--bg);
}

.spend__form {
  display: grid;
  grid-template-columns: 1.2fr 75px 1.5fr auto;
  gap: 8px;
  margin: 16px 0;
  align-items: center;
}

.spend__form .spend__add-btn {
  height: var(--control-height);
  padding: 0 20px;
  white-space: nowrap;
}

.spend__form input:focus-visible {
  outline: none;
  border-color: var(--focus-ring);
  box-shadow: 0 0 0 3px var(--focus-ring) inset;
}

.spend__form input {
  background: var(--surface);
  border-color: color-mix(in srgb, var(--border) 86%, transparent);
  color: var(--text-primary);
}

.spend__form input::placeholder {
  color: color-mix(in srgb, var(--text-secondary) 84%, transparent);
}

.spend {
  height: 100%;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

.spend-fg {
  height: 100%;
  min-height: 0;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.spend-fg__tabs {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0;
  padding: 4px;
  border-radius: 999px;
  background: var(--tasks-tabs-bg);
  --tab-count: 2;
}

.spend-fg__tab {
  border: none;
  background: transparent;
  padding: 8px 14px;
  border-radius: 999px;
  font-weight: 600;
  font-size: 13px;
  color: var(--tasks-tab-fg);
  cursor: pointer;
  transition: background var(--motion-duration-fast) var(--ease-standard),
    color var(--motion-duration-fast) var(--ease-standard),
    transform var(--motion-duration-fast) var(--ease-standard);
  transform: translate3d(0, 0, 0);
}

.spend-fg__tab.is-active {
  background: transparent;
  color: var(--tasks-tab-active-fg);
}

.spend-fg__tab.is-pressing {
  animation: tab-press-bounce var(--motion-duration-fast) var(--ease-emphasized);
}

.spend-fg__tab:focus-visible {
  outline: none;
  box-shadow: none;
}

@keyframes tab-press-bounce {
  0% {
    transform: scale(1);
  }
  40% {
    transform: scale(0.985);
  }
  100% {
    transform: scale(1);
  }
}

.spend-fg__viewport {
  flex: 1;
  min-height: 0;
  overflow: hidden;
  display: flex;
}

.spend-fg__track {
  height: 100%;
  display: flex;
  transition: transform var(--motion-duration-medium) var(--ease-emphasized);
  will-change: transform;
  transform: translate3d(0, 0, 0);
}

.spend-fg__panel {
  min-width: 100%;
  min-height: 0;
  height: 100%;
  display: flex;
  flex-direction: column;
}

html[data-motion='reduce'] .spend-fg__track {
  transition: none;
}

.spend__total {
  margin-bottom: 12px;
}

.spend__amount {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.spend__amount-row {
  display: flex;
  align-items: baseline;
  gap: 6px;
  font-size: 14px;
  color: var(--text-secondary);
}

.spend__amount-row--main {
  font-size: 32px;
  font-weight: 700;
  letter-spacing: -0.03em;
  color: var(--text-primary);
  line-height: 1.1;
  margin-bottom: 4px;
}

.spend__amount-currency {
  font-weight: 600;
  font-size: 0.8em;
}

.spend__list {
  display: grid;
  gap: 8px;
  margin-top: 16px;
}

.spend__list--scroll {
  flex: 1;
  min-height: 0;
  overflow: auto;
  padding: 2px;
}

.spend__list-wrap {
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

.spend__empty {
  padding: 12px 16px;
  border-radius: 12px;
  background: color-mix(in srgb, var(--bg-elevated) 84%, var(--bg-muted));
  color: var(--text-secondary);
  border: 1px solid color-mix(in srgb, var(--border) 84%, transparent);
}

.spend__item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: color-mix(in srgb, var(--bg-elevated) 84%, var(--bg-muted));
  padding: 12px 16px;
  border-radius: 12px;
  border: 1px solid color-mix(in srgb, var(--border) 84%, transparent);
  font-size: 14px;
  transition: background 180ms ease, box-shadow 180ms ease, border-color 180ms ease;
}

.spend__item-left {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}

.spend__item-icon {
  width: 28px;
  height: 28px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-elevated);
  color: var(--text-secondary);
  border: 1px solid var(--border);
  flex: 0 0 auto;
}

.spend__item-name {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--text-primary);
}

.spend__item-right {
  display: inline-flex;
  align-items: center;
  gap: 10px;
}

.spend__delete {
  border: none;
  padding: 0;
  width: 32px;
  height: 32px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  opacity: 0;
  background: transparent;
  color: var(--text-secondary);
  transition: opacity 160ms ease, background 160ms ease, color 160ms ease;
}

.spend__item:hover .spend__delete,
.spend__item:focus-within .spend__delete {
  opacity: 1;
}

.spend__delete:hover {
  background: var(--surface-hover);
  color: var(--text-primary);
}

.spend__delete:focus-visible {
  outline: 3px solid var(--focus-ring);
  outline-offset: 2px;
}

.spend__category-option {
  display: inline-flex;
  align-items: center;
  gap: 10px;
}

.spend__category-icon {
  width: 22px;
  height: 22px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--text-secondary);
}

.spend__item:hover {
  background: color-mix(in srgb, var(--bg-muted) 72%, var(--bg-elevated));
  border-color: color-mix(in srgb, var(--border) 96%, transparent);
  box-shadow: 0 1px 1px color-mix(in srgb, #000 8%, transparent);
}

.spend__item.is-active,
.spend__item:focus-visible {
  background: color-mix(in srgb, var(--bg-muted) 72%, var(--bg-elevated));
  border-color: color-mix(in srgb, var(--border) 96%, transparent);
  box-shadow: 0 1px 1px color-mix(in srgb, #000 8%, transparent);
  outline: none;
}

.spend__item:focus {
  outline: none;
}

.weather-widget-card .card__body {
  padding-top: 8px;
}

.weather-widget {
  display: grid;
  grid-template-columns: 1fr 1.35fr;
  gap: 14px;
  min-height: 100%;
}

.weather-widget__main {
  display: grid;
  align-content: start;
  gap: 4px;
}

.weather-widget__city {
  margin: 0;
  font-size: 11px;
  line-height: 1.2;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--text-secondary);
}

.weather-widget__temp {
  font-family: var(--font-display);
  font-size: clamp(30px, 3.4vw, 40px);
  line-height: 0.95;
  letter-spacing: -0.03em;
}

.weather-widget__range {
  margin: 0;
  font-size: 12px;
  color: var(--text-secondary);
}

.weather-widget__condition {
  margin: 0;
  font-size: 13px;
  font-weight: 600;
  display: inline-flex;
  align-items: center;
  gap: 7px;
}

.weather-widget__days {
  display: grid;
  gap: 8px;
  align-content: start;
}

.weather-widget__row {
  display: grid;
  grid-template-columns: 54px 1fr auto;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  border-radius: 10px;
  background: color-mix(in srgb, var(--bg-muted) 72%, var(--bg-elevated));
  border: 1px solid color-mix(in srgb, var(--border) 75%, transparent);
  font-size: 12px;
}

.weather-widget__day-label {
  font-weight: 650;
}

.weather-widget__day-range {
  font-variant-numeric: tabular-nums;
  font-weight: 650;
}

.weather-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--text-secondary);
  transition: color 180ms ease, transform 180ms ease;
}

.weather-widget__row .weather-icon:hover,
.weather-widget__condition .weather-icon:hover {
  transform: translateY(-1px);
}

.weather-icon--sun {
  color: color-mix(in srgb, #f59e0b 64%, var(--text-primary));
}

.weather-icon--cloud {
  color: color-mix(in srgb, #94a3b8 54%, var(--text-primary));
}

.weather-icon--fog {
  color: color-mix(in srgb, #9ca3af 62%, var(--text-primary));
}

.weather-icon--drizzle {
  color: color-mix(in srgb, #64748b 55%, #4f46e5);
}

.weather-icon--rain {
  color: color-mix(in srgb, #2563eb 58%, var(--text-primary));
}

.weather-icon--snow {
  color: color-mix(in srgb, #cbd5e1 62%, #334155);
}

.weather-icon--storm {
  color: color-mix(in srgb, #f59e0b 58%, #7c2d12);
}

.muted {
  color: var(--text-secondary);
}

.settings__top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.settings--page {
  padding: 6px;
}

.settings__eyebrow {
  text-transform: uppercase;
  letter-spacing: 0.2em;
  font-size: 12px;
  color: var(--text-secondary);
  margin: 0 0 6px;
}

.settings--page h2 {
  font-size: 34px;
  line-height: 1.14;
  letter-spacing: -0.012em;
}

.settings--page .card__eyebrow {
  font-size: 12px;
  letter-spacing: 0.16em;
}

.settings--page .card__title {
  font-size: 34px;
  line-height: 1.14;
  letter-spacing: -0.012em;
}

.settings--page .settings__label {
  font-size: 13px;
  line-height: 1.35;
}

.settings--page .muted {
  font-size: 14px;
  line-height: 1.45;
}

.settings--page input,
.settings--page select,
.settings--page .select__value,
.settings--page .button {
  font-size: 16px;
  line-height: 1.35;
}

.settings__panel {
  max-width: 980px;
  margin: 0 auto;
  padding: 14px;
  border-radius: 20px;
  border: 1px solid color-mix(in srgb, var(--border) 80%, transparent);
  background: color-mix(in srgb, var(--bg-elevated) 96%, transparent);
  box-shadow: 0 24px 50px color-mix(in srgb, #000 20%, transparent);
}

.settings__stack {
  display: grid;
  gap: 16px;
}

.settings__stack--compact {
  gap: 12px;
}

.settings__row {
  display: flex;
  justify-content: space-between;
  gap: 16px;
  align-items: center;
}

.settings__field {
  display: grid;
  gap: 6px;
}

.settings__autocomplete {
  position: relative;
}

.settings__manualCityInput.is-editable {
  background: var(--surface);
}

.settings__autocompleteMenu {
  position: absolute;
  top: calc(100% + 6px);
  left: 0;
  right: 0;
  z-index: var(--z-popover);
  max-height: 260px;
  overflow-y: auto;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--bg-elevated) 96%, transparent);
  box-shadow: 0 8px 24px color-mix(in srgb, #000 12%, transparent);
  padding: 6px;
}

.settings__autocompleteItem {
  width: 100%;
  border: none;
  background: transparent;
  border-radius: 10px;
  padding: 9px 10px;
  font: inherit;
  color: var(--text-primary);
  text-align: left;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  cursor: pointer;
}

.settings__autocompleteItem:hover,
.settings__autocompleteItem.is-active {
  background: color-mix(in srgb, var(--accent) 16%, var(--bg-muted));
}

.settings__autocompleteItem:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--accent) 35%, transparent);
  outline-offset: -1px;
}

.settings__autocompleteSource {
  font-size: 12px;
  color: var(--text-secondary);
}

.settings__autocompleteEmpty {
  margin: 2px 0;
  padding: 10px 12px;
  font-size: 13px;
  color: var(--text-secondary);
}

.settings__actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-top: 10px;
}

.settings__label {
  color: var(--text-secondary);
  font-size: 13px;
}

.toggle {
  display: inline-flex;
  align-items: center;
  cursor: pointer;
  position: relative;
}

.toggle input {
  position: absolute;
  opacity: 0;
  pointer-events: none;
}

.toggle__track {
  width: 44px;
  height: 26px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--bg-muted);
  position: relative;
  transition: background var(--transition-base), border-color var(--transition-base);
}

.toggle__track::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 3px;
  width: 20px;
  height: 20px;
  border-radius: 999px;
  background: var(--bg-elevated);
  border: 1px solid var(--border);
  transform: translateY(-50%);
  transition: transform var(--transition-base);
}

.toggle input:checked + .toggle__track {
  background: color-mix(in srgb, var(--accent) 35%, var(--bg-muted));
  border-color: color-mix(in srgb, var(--accent) 35%, var(--border));
}

.toggle input:checked + .toggle__track::after {
  transform: translate(18px, -50%);
}

.toggle input:focus-visible + .toggle__track {
  outline: 3px solid color-mix(in srgb, var(--accent) 35%, transparent);
  outline-offset: 2px;
}

/* Radix popper/portal layers */
[data-radix-popper-content-wrapper] {
  z-index: var(--z-popover);
}

/* Dialog styles */
.dialog {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 30;
  display: flex;
  align-items: center;
  justify-content: center;
}

.dialog__backdrop {
  position: absolute;
  inset: 0;
  background: rgba(10, 12, 14, 0.6);
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--motion-duration-medium) var(--ease-accelerate);
  will-change: opacity;
}

.dialog--visible {
  pointer-events: auto;
}

.dialog--visible .dialog__backdrop {
  opacity: 1;
  pointer-events: auto;
  transition: opacity var(--motion-duration-slow) var(--ease-decelerate);
}

.dialog__panel {
  position: relative;
  width: min(480px, 90vw);
  max-height: min(600px, 85vh);
  background: var(--bg-elevated);
  @apply rounded-2xl;
  border: 1px solid var(--border);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  transform: scale(0.97) translate3d(0, var(--motion-shift-xs), 0);
  opacity: 0;
  transition: transform var(--motion-duration-medium) var(--ease-accelerate),
    opacity var(--motion-duration-medium) var(--ease-accelerate);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  will-change: transform, opacity;
}

.dialog--visible .dialog__panel {
  transform: scale(1) translate3d(0, 0, 0);
  opacity: 1;
  transition: transform var(--motion-duration-slow) var(--ease-decelerate),
    opacity var(--motion-duration-slow) var(--ease-decelerate);
}

html[data-motion='reduce'] .dialog__panel {
  transform: translateZ(0);
  transition: opacity var(--motion-duration-medium) var(--ease-accelerate);
}

html[data-motion='reduce'] .dialog--visible .dialog__panel {
  transform: translateZ(0);
  transition: opacity var(--motion-duration-slow) var(--ease-decelerate);
}

.dialog__header {
  padding: 20px 24px 12px;
  border-bottom: 1px solid var(--border);
}

.dialog__header h2 {
  font-size: 20px;
}

.dialog__content {
  padding: 24px;
  flex: 1;
  overflow-y: auto;
}

.dialog__body {
  margin-bottom: 24px;
}

.dialog__form {
  display: grid;
  gap: 16px;
}

.dialog__actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  margin-top: 8px;
}

@media (max-width: 960px) {
  .app-shell__header {
    grid-template-columns: 1fr;
    --header-action-guard: 0px;
    align-items: start;
    gap: 10px;
    margin-bottom: 8px;
  }

  .app-shell__hero-stage {
    min-height: 84px;
  }

  .app-shell__hero-stage--editing::after {
    display: none;
  }

  .app-shell__hero-date {
    font-size: calc(16px * var(--node-scale));
  }

  .app-shell__hero-lunar {
    font-size: calc(16px * var(--node-scale));
  }

  .app-shell__hero-time-main {
    font-size: calc(42px * var(--node-scale));
  }

  .app-shell__hero-time {
    --clock-seconds-size: calc(24px * var(--node-scale));
  }

  .app-shell__hero-time-colon {
    font-size: calc(40px * var(--node-scale));
  }

  .app-shell__hero-time-seconds-wrap {
    font-size: var(--clock-seconds-size);
  }

  .app-shell__hero-time-seconds {
    font-size: var(--clock-seconds-size) !important;
  }

  .app-shell__status {
    position: static;
    width: auto;
    height: auto;
    padding-top: 0;
    justify-content: flex-start;
    flex-wrap: wrap;
  }

  .app-shell__top-action {
    padding: 0 10px;
    gap: 6px;
    font-size: 14px;
  }

  .board {
    grid-template-columns: 1fr;
  }

  .spend__form {
    grid-template-columns: 1fr;
  }

  .spend__delete {
    opacity: 1;
  }

}

/* User-requested behavior: remove click/focus outer highlight across all components. */
button:focus,
button:focus-visible,
a:focus,
a:focus-visible,
[role='button']:focus,
[role='button']:focus-visible,
[role='tab']:focus,
[role='tab']:focus-visible,
input:focus,
input:focus-visible,
select:focus,
select:focus-visible,
textarea:focus,
textarea:focus-visible,
[tabindex]:not([tabindex='-1']):focus,
[tabindex]:not([tabindex='-1']):focus-visible,
.button:focus,
.button:focus-visible,
.task-card:focus-visible,
.task-row:focus-visible,
.spend__item:focus,
.spend__item:focus-visible,
.toggle input:focus-visible + .toggle__track,
.date-picker-trigger:focus-visible,
.task-tag-select__option:focus-visible,
.date-picker-popover__nav-btn:focus-visible {
  outline: none !important;
  box-shadow: none !important;
}

.select__trigger[data-state='open'],
.task-fg .select__trigger[data-state='open'],
.task-fg .task-tag-select__trigger[data-state='open'],
.task-fg .date-picker-trigger.is-open,
.task-fg .task-tag-select__trigger.is-open,
.date-picker-trigger.is-open {
  outline: none !important;
  box-shadow: none !important;
  border-color: var(--border) !important;
}
:root {
  --background: 0 0% 100%;
  --foreground: 240 10% 3.9%;
  --card: 0 0% 100%;
  --card-foreground: 240 10% 3.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 240 10% 3.9%;
  --primary: 240 5.9% 10%;
  --primary-foreground: 0 0% 98%;
  --secondary: 240 4.8% 95.9%;
  --secondary-foreground: 240 5.9% 10%;
  --muted: 240 4.8% 95.9%;
  --muted-foreground: 240 3.8% 46.1%;
  --accent: 240 4.8% 95.9%;
  --accent-foreground: 240 5.9% 10%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;
  --border: 240 5.9% 90%;
  --input: 240 5.9% 90%;
  --ring: 240 10% 3.9%;
  --chart-1: 12 76% 61%;
  --chart-2: 173 58% 39%;
  --chart-3: 197 37% 24%;
  --chart-4: 43 74% 66%;
  --chart-5: 27 87% 67%;
  --radius: 0.5rem;
}

.dark {
  --background: 240 10% 3.9%;
  --foreground: 0 0% 98%;
  --card: 240 10% 3.9%;
  --card-foreground: 0 0% 98%;
  --popover: 240 10% 3.9%;
  --popover-foreground: 0 0% 98%;
  --primary: 0 0% 98%;
  --primary-foreground: 240 5.9% 10%;
  --secondary: 240 3.7% 15.9%;
  --secondary-foreground: 0 0% 98%;
  --muted: 240 3.7% 15.9%;
  --muted-foreground: 240 5% 64.9%;
  --accent: 240 3.7% 15.9%;
  --accent-foreground: 0 0% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 0 0% 98%;
  --border: 240 3.7% 15.9%;
  --input: 240 3.7% 15.9%;
  --ring: 240 4.9% 83.9%;
  --chart-1: 220 70% 50%;
  --chart-2: 160 60% 45%;
  --chart-3: 30 80% 55%;
  --chart-4: 280 65% 60%;
  --chart-5: 340 75% 55%;
}
}

.focus-shell {
  min-height: 100vh;
  padding: 20px;
  display: flex;
  gap: 18px;
  background:
    radial-gradient(circle at -10% 0%, color-mix(in srgb, var(--accent) 12%, transparent), transparent 38%),
    radial-gradient(circle at 110% 100%, color-mix(in srgb, var(--accent) 8%, transparent), transparent 35%),
    var(--bg);
}

.focus-shell,
.focus-shell__main,
.focus-shell__route-layer,
.focus-sidebar,
.focus-sidebar__item,
.focus-sidebar__toggle {
  transition: background-color 200ms var(--ease-standard), color 200ms var(--ease-standard), border-color 200ms var(--ease-standard);
}

.focus-shell__main {
  flex: 1;
  min-width: 0;
  min-height: calc(100vh - 40px);
  border-radius: 24px;
  border: 1px solid color-mix(in srgb, var(--border) 82%, transparent);
  background: color-mix(in srgb, var(--surface) 94%, var(--bg-muted) 6%);
  box-shadow: 0 22px 48px color-mix(in srgb, #0f172a 10%, transparent);
  overflow: hidden;
}

.focus-shell__route-layer {
  min-height: calc(100vh - 40px);
  padding: 18px;
}

.focus-sidebar {
  min-height: calc(100vh - 40px);
  border-radius: 24px;
  border: 1px solid color-mix(in srgb, var(--border) 80%, transparent);
  background: color-mix(in srgb, var(--surface) 96%, var(--bg-muted) 4%);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-shadow: 0 18px 40px color-mix(in srgb, #0f172a 10%, transparent);
}

.focus-sidebar__top {
  padding: 14px 12px 8px;
  border-bottom: 1px solid color-mix(in srgb, var(--border) 72%, transparent);
}

.focus-sidebar__toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  width: 100%;
  min-height: 36px;
  padding: 0 10px;
  border-radius: 11px;
  border: 1px solid color-mix(in srgb, var(--border) 75%, transparent);
  background: color-mix(in srgb, var(--bg-elevated) 94%, var(--bg-muted) 6%);
  color: var(--text-primary);
}

.focus-sidebar__toggle span {
  font-family: var(--font-body);
  font-size: 13px;
  font-weight: 600;
  line-height: 1.2;
}

.focus-sidebar__nav {
  display: grid;
  gap: 6px;
  padding: 12px;
  flex: 1;
  align-content: start;
}

.focus-sidebar__item {
  min-height: 40px;
  border-radius: 12px;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 0 12px;
  text-decoration: none;
  color: var(--text-secondary);
  border: 1px solid transparent;
  font-family: var(--font-body);
  font-size: 13px;
  font-weight: 600;
  line-height: 1.2;
  transition: background var(--transition-base), border-color var(--transition-base), color var(--transition-base);
}

.focus-sidebar__item:hover {
  color: var(--text-primary);
  border-color: color-mix(in srgb, var(--border) 70%, transparent);
  background: color-mix(in srgb, var(--bg-elevated) 90%, var(--surface) 10%);
}

.focus-sidebar__item.is-active {
  color: var(--sidebar-active-fg);
  border-color: color-mix(in srgb, var(--accent) 38%, var(--border));
  background: color-mix(in srgb, var(--accent) 78%, var(--bg-elevated) 22%);
}

.focus-sidebar.is-collapsed .focus-sidebar__nav {
  justify-items: center;
}

.focus-sidebar.is-collapsed .focus-sidebar__item {
  width: 42px;
  height: 42px;
  min-height: 42px;
  padding: 0;
  justify-content: center;
}

.focus-sidebar__bottom {
  margin-top: auto;
  padding: 10px 12px 14px;
  border-top: 1px solid color-mix(in srgb, var(--border) 72%, transparent);
}

.focus-sidebar__theme-toggle {
  display: flex;
  justify-content: center;
  align-items: center;
}

.focus-sidebar.is-collapsed .focus-sidebar__bottom {
  padding: 10px 8px 12px;
}

.focus-sidebar.is-collapsed .focus-sidebar__theme-toggle .theme-switch {
  --toggle-size: 8px;
}

.focus-shell--sidebar-dimmed .focus-sidebar {
  opacity: 0.45;
  filter: blur(1px) saturate(0.85);
  pointer-events: none;
}

.module-placeholder {
  min-height: calc(100vh - 76px);
  border-radius: 20px;
  border: 1px dashed color-mix(in srgb, var(--border) 86%, transparent);
  display: grid;
  place-items: center;
  background:
    linear-gradient(180deg, color-mix(in srgb, var(--bg-elevated) 92%, transparent), color-mix(in srgb, var(--surface) 95%, transparent)),
    repeating-linear-gradient(45deg, transparent, transparent 16px, color-mix(in srgb, var(--border) 38%, transparent) 16px, color-mix(in srgb, var(--border) 38%, transparent) 17px);
}

.module-placeholder__content {
  max-width: 560px;
  margin: 0 auto;
  padding: 36px 28px;
  text-align: center;
}

.module-placeholder__eyebrow {
  margin: 0;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  font-size: 12px;
  color: var(--text-secondary);
}

.module-placeholder__title {
  margin: 10px 0 14px;
  font-size: clamp(30px, 4.2vw, 48px);
  line-height: 1.08;
}

.module-placeholder__description {
  margin: 0;
  color: var(--text-secondary);
  line-height: 1.6;
  font-size: 15px;
}

@media (max-width: 960px) {
  .focus-shell {
    padding: 12px;
    gap: 10px;
    flex-direction: column;
  }

  .focus-shell__main {
    min-height: auto;
  }

  .focus-shell__route-layer {
    min-height: auto;
    padding: 12px;
  }

  .focus-sidebar {
    min-height: auto;
    width: 100% !important;
  }

  .focus-sidebar__top {
    padding: 10px 10px 8px;
  }

  .focus-sidebar__nav {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }

  .focus-sidebar__item {
    justify-content: center;
    padding: 0 8px;
    gap: 6px;
    flex-direction: column;
    min-height: 58px;
  }

  .focus-sidebar.is-collapsed .focus-sidebar__item {
    width: 100%;
    height: 58px;
  }

  .focus-sidebar__bottom {
    padding: 8px 10px 10px;
  }

  .focus-sidebar.is-collapsed .focus-sidebar__bottom {
    padding: 8px 10px 10px;
  }

  .module-placeholder {
    min-height: calc(100vh - 220px);
  }

  .focus-portal__content {
    grid-template-columns: 1fr;
  }

  .focus-stage__actions .button {
    min-width: 132px;
  }

  .focus-history__list {
    max-height: none;
  }
}

.calendar-page {
  display: grid;
  gap: 16px;
  padding: 24px;
}

.calendar-page__header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 16px;
  flex-wrap: wrap;
}

.calendar-page__eyebrow {
  margin: 0 0 6px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  font-size: 12px;
  color: var(--text-secondary);
}

.calendar-page__range {
  margin: 8px 0 0;
  color: var(--text-secondary);
}

.calendar-page__header-actions {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
}

.calendar-page__settings-link {
  color: var(--accent);
  font-weight: 600;
  text-decoration: none;
}

.calendar-page__sync {
  display: flex;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap;
  color: var(--text-secondary);
  font-size: 13px;
}

.calendar-page__sync-indicator {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.calendar-page__sync-indicator::before {
  content: '';
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: #16a34a;
}

.calendar-page__sync-indicator.is-error::before {
  background: #dc2626;
}

.calendar-week {
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  gap: 10px;
}

.calendar-day {
  background: var(--bg-muted);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 10px;
  min-height: 220px;
  display: grid;
  gap: 10px;
  align-content: start;
}

.calendar-day__header {
  display: flex;
  justify-content: space-between;
  font-weight: 650;
}

.calendar-day__events {
  display: grid;
  gap: 8px;
}

.calendar-event {
  border-left: 4px solid #525252;
  background: var(--bg-elevated);
  border-radius: 10px;
  padding: 8px;
  display: grid;
  gap: 4px;
}

.calendar-event__title {
  margin: 0;
  font-weight: 640;
}

.calendar-event__meta {
  margin: 0;
  font-size: 12px;
  color: var(--text-secondary);
}

.calendar-manage {
  display: grid;
  gap: 12px;
}

.calendar-manage__list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: 8px;
}

.calendar-manage__item {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto auto auto;
  align-items: center;
  gap: 8px;
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 8px;
}

.calendar-manage__toggle {
  display: flex;
  align-items: center;
  gap: 8px;
}

.calendar-manage__toggle input[type='checkbox'] {
  width: 18px;
}

.calendar-manage__badge {
  font-size: 11px;
  color: var(--text-secondary);
}

.calendar-manage__confirm {
  display: flex;
  gap: 6px;
}

.calendar-manage__locked {
  font-size: 12px;
  color: var(--text-secondary);
}

.calendar-manage__create {
  border-top: 1px solid var(--border);
  padding-top: 10px;
  display: grid;
  gap: 8px;
}

.calendar-manage__create h3 {
  margin: 0;
}

.calendar-manage__create label {
  display: grid;
  gap: 4px;
}

@media (max-width: 1120px) {
  .calendar-week {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 720px) {
  .calendar-page {
    padding: 16px;
  }

  .calendar-week {
    grid-template-columns: 1fr;
  }

  .calendar-manage__item {
    grid-template-columns: 1fr;
    justify-items: start;
  }
}

.calendar-v2 {
  display: grid;
  grid-template-columns: 280px minmax(0, 1fr) clamp(280px, 22vw, 360px);
  min-height: calc(100vh - 120px);
  border: 1px solid var(--border);
  border-radius: 14px;
  background: var(--bg-elevated);
  overflow: hidden;
}

.calendar-v2__left,
.calendar-v2__right {
  background: color-mix(in srgb, var(--bg-muted) 85%, var(--bg) 15%);
  border-right: 1px solid var(--border);
  padding: 14px;
  display: grid;
  align-content: start;
  gap: 14px;
}

.calendar-v2__right {
  border-right: 0;
  border-left: 1px solid var(--border);
}

.calendar-main-title {
  margin: 0;
  font-size: 36px;
}

.calendar-mini {
  display: grid;
  gap: 8px;
}

.calendar-mini__weekdays,
.calendar-mini__grid {
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  gap: 4px;
}

.calendar-mini__weekdays span {
  font-size: 11px;
  color: var(--text-secondary);
  text-align: center;
}

.calendar-mini__cell {
  min-height: 28px;
  border: 1px solid transparent;
  border-radius: 8px;
  background: transparent;
  font-size: 12px;
  cursor: pointer;
}

.calendar-mini__cell.is-dim {
  color: var(--text-secondary);
}

.calendar-mini__cell.is-selected {
  background: color-mix(in srgb, var(--accent) 14%, transparent);
}

.calendar-mini__cell.is-today {
  box-shadow: inset 0 0 0 2px color-mix(in srgb, #ef4444 82%, transparent);
}

.calendar-mini__cell:focus-visible {
  outline: none;
  box-shadow: none;
}

.calendar-subscriptions {
  display: grid;
  gap: 12px;
  min-height: 0;
}

.calendar-subscriptions h3 {
  margin: 0;
}

.calendar-subscriptions__scroll {
  max-height: 420px;
}

.calendar-subscriptions__inner {
  padding-right: 8px;
}

.calendar-subscriptions__list {
  display: grid;
  gap: 8px;
}

.calendar-subscriptions__item {
  display: grid;
  grid-template-columns: auto auto auto minmax(0, 1fr) auto auto;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  border: 1px solid transparent;
  border-radius: 10px;
  padding: 4px;
  background: color-mix(in srgb, var(--bg-elevated) 70%, transparent);
  transition: background 160ms ease;
}

.calendar-subscriptions__item.is-dragging {
  opacity: 0.8;
  background: color-mix(in srgb, var(--accent) 10%, var(--bg-elevated));
  border-color: color-mix(in srgb, var(--accent) 32%, transparent);
}

.calendar-subscriptions__item.is-over {
  border-color: color-mix(in srgb, var(--accent) 42%, transparent);
}

.calendar-subscriptions__item.is-disabled {
  opacity: 0.58;
}

.calendar-subscriptions__name {
  min-width: 0;
  line-height: 1.35;
}

.calendar-subscriptions__meta {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin-left: auto;
}

.calendar-subscriptions__visibility,
.calendar-subscriptions__drag-handle {
  width: 24px;
  height: 24px;
}

.calendar-subscriptions__item small {
  margin-left: auto;
  color: var(--text-secondary);
  font-size: 11px;
}

.calendar-provider-badge {
  margin-left: 2px;
}

.calendar-sync-error {
  margin-left: 4px;
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.calendar-color-popover {
  width: 220px;
  display: grid;
  gap: 8px;
}

.calendar-color-popover__title {
  font-size: 12px;
  color: var(--text-secondary);
}

.calendar-color-grid {
  display: grid;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  gap: 8px;
}

.calendar-color-swatch {
  width: 24px;
  height: 24px;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, var(--text-primary) 24%, transparent);
  cursor: pointer;
}

.calendar-color-swatch.is-selected {
  box-shadow:
    0 0 0 2px var(--bg-elevated),
    0 0 0 3px color-mix(in srgb, var(--accent) 48%, transparent);
}

.calendar-color-dot-trigger {
  width: 24px;
  height: 24px;
  border-radius: 999px;
  padding: 0;
  border: 1px solid color-mix(in srgb, var(--text-primary) 18%, transparent);
}

.calendar-subscriptions__dot-trigger {
  width: 14px;
  height: 14px;
  min-width: 14px;
  border-radius: 999px;
  padding: 0;
  border: 1px solid color-mix(in srgb, var(--text-primary) 16%, transparent);
  box-shadow: 0 0 0 1px color-mix(in srgb, var(--bg-elevated) 90%, transparent);
}

.calendar-subscriptions__remove svg,
.calendar-subscriptions__drag-handle svg {
  width: 14px;
  height: 14px;
}

.calendar-subscriptions__drag-handle {
  cursor: grab;
}

.calendar-subscriptions__drag-handle:active {
  cursor: grabbing;
}

.calendar-subscriptions__dot {
  width: 10px;
  height: 10px;
  border-radius: 999px;
}

.calendar-subscriptions__add {
  justify-content: flex-start;
  gap: 6px;
  min-height: 38px;
  border-radius: 10px;
  font-weight: 600;
}

.calendar-subscriptions__add svg {
  width: 14px;
  height: 14px;
}

.calendar-v2__main {
  padding: 14px;
  display: grid;
  grid-template-rows: auto auto 1fr;
  gap: 12px;
}

.calendar-toolbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
}

.calendar-toolbar__left,
.calendar-toolbar__right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.calendar-toolbar select,
.calendar-toolbar__select {
  width: auto;
  min-width: 94px;
}

.calendar-month-grid {
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  border-top: 1px solid var(--border);
  border-left: 1px solid var(--border);
}

.calendar-month-grid__weekday {
  padding: 8px;
  font-weight: 600;
  color: var(--text-secondary);
  border-right: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
}

.calendar-month-grid__cell {
  min-height: 132px;
  border-right: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
  padding: 6px;
  background: transparent;
  text-align: left;
  display: grid;
  align-content: start;
  gap: 6px;
  cursor: pointer;
  border-radius: 0;
  outline: 0;
  transition: background-color 140ms ease;
}

.calendar-month-grid__cell:hover {
  background: color-mix(in srgb, var(--bg-muted) 65%, transparent);
}

.calendar-month-grid__cell.is-outside {
  color: var(--text-secondary);
  background: color-mix(in srgb, var(--bg-muted) 50%, transparent);
}

.calendar-month-grid__cell.is-selected {
  background: color-mix(in srgb, var(--accent) 7%, var(--bg));
}

.calendar-month-grid__cell.is-today {
  box-shadow: inset 0 0 0 2px color-mix(in srgb, #ef4444 85%, transparent);
}

.calendar-month-grid__cell.is-selected.is-today {
  box-shadow: inset 0 0 0 2px color-mix(in srgb, #ef4444 85%, transparent);
}

.calendar-month-grid__cell:focus {
  outline: none;
}

.calendar-month-grid__cell:focus-visible {
  outline: none;
  box-shadow: none;
}

.calendar-month-grid__cell.is-selected:focus-visible {
  outline: none;
  box-shadow: none;
}

.calendar-month-grid__date {
  font-size: 13px;
  font-weight: 650;
}

.calendar-month-grid__events {
  display: grid;
  gap: 4px;
}

.calendar-chip {
  display: block;
  border-radius: 6px;
  padding: 2px 6px;
  font-size: 12px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.calendar-chip--lunar {
  color: #64748b;
  background: #f1f5f9;
}

.calendar-chip--holiday {
  color: #1d4ed8;
  background: #dbeafe;
}

.calendar-chip--event {
  color: color-mix(in srgb, var(--text-primary) 90%, transparent);
  background: color-mix(in srgb, var(--accent) 16%, var(--bg-muted));
}

.calendar-chip--task {
  color: color-mix(in srgb, var(--status-todo) 84%, var(--text-primary));
  background: color-mix(in srgb, var(--status-todo) 24%, var(--bg-muted));
}

.calendar-chip--task-red {
  color: color-mix(in srgb, #ef4444 88%, var(--text-primary));
  background: color-mix(in srgb, #ef4444 24%, var(--bg-muted));
}

.calendar-chip--task-doing {
  color: color-mix(in srgb, var(--status-doing) 82%, var(--text-primary));
  background: color-mix(in srgb, var(--status-doing) 24%, var(--bg-muted));
}

.calendar-chip--task-done {
  color: color-mix(in srgb, var(--status-done) 82%, var(--text-primary));
  background: color-mix(in srgb, var(--status-done) 24%, var(--bg-muted));
}

.calendar-chip--more {
  color: var(--text-secondary);
  background: transparent;
  padding-left: 0;
}

.calendar-side-panel {
  display: grid;
  gap: 14px;
  align-content: start;
  font-family: var(--font-body);
  padding: 4px 2px 0;
}

.calendar-side-panel__title {
  margin: 0;
  font-size: 18px;
  line-height: 1.2;
  font-weight: 600;
}

.calendar-side-panel__list {
  margin: 0;
  padding: 0;
  list-style: none;
  display: grid;
  gap: 8px;
}

.calendar-side-panel__list--animated {
  min-height: 0;
}

.calendar-side-panel__animated-scroll {
  display: grid;
  gap: 8px;
}

.calendar-task-card {
  background: #ffffff;
  border: 1px solid color-mix(in srgb, var(--border) 84%, transparent);
  border-radius: 12px;
  padding: 10px;
  display: grid;
  gap: 8px;
  box-shadow: 0 1px 2px color-mix(in srgb, #0f172a 7%, transparent);
}

.calendar-task-card__header {
  display: grid;
  grid-template-columns: auto minmax(0, 1fr) auto;
  align-items: center;
  gap: 8px;
}

.calendar-task-card__meta {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.calendar-task-card__meta-badge {
  font-size: 11px;
  line-height: 1.25;
}

.calendar-task-card__tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.calendar-task-card__tag {
  font-size: 11px;
}

.calendar-task-card__edit {
  min-height: 26px;
  height: 26px;
  padding-inline: 8px;
}

.calendar-task-card__editor {
  width: 280px;
  display: grid;
  gap: 8px;
}

.calendar-task-card__editor-grid {
  display: grid;
  gap: 8px;
}

.calendar-task-card__editor-grid label {
  display: grid;
  gap: 4px;
  font-size: 12px;
  color: var(--text-secondary);
}

.calendar-task-card__editor-actions {
  display: flex;
  justify-content: space-between;
  gap: 8px;
}

.calendar-side-panel__divider {
  height: 1px;
  width: 100%;
  background: color-mix(in srgb, var(--border) 82%, transparent);
  margin: 2px 0 4px;
}

.calendar-side-row {
  display: grid;
  grid-template-columns: auto minmax(0, 1fr) auto;
  align-items: center;
  gap: 10px;
}

.calendar-side-row__dot {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: #5f7688;
}

.calendar-side-row__dot--todo {
  background: var(--status-todo);
}

.calendar-side-row__dot--doing {
  background: var(--status-doing);
}

.calendar-side-row__dot--done {
  background: var(--status-done);
}

.calendar-side-row__dot--lunar {
  background: #28b1e1;
}

.calendar-side-row__dot--holiday {
  background: #4f7782;
}

.calendar-side-row__dot--event {
  background: #4f7782;
}

.calendar-side-row__text {
  min-width: 0;
  font-size: 15px;
  line-height: 1.3;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.calendar-v2__right .calendar-side-row__text.is-cjk {
  font-size: 14px;
  font-weight: 500;
  line-height: 1.35;
}

.calendar-side-row__action {
  display: inline-flex;
  align-items: center;
}

.calendar-side-row__delete {
  width: 24px;
  height: 24px;
  min-height: 24px;
  border-radius: 8px;
  color: color-mix(in srgb, var(--text-secondary) 92%, transparent);
}

.calendar-side-row__delete:hover {
  color: #b3261e;
  background: color-mix(in srgb, #b3261e 12%, transparent);
}

.calendar-side-row__delete:disabled {
  opacity: 0.72;
}

.calendar-side-row__delete-icon {
  width: 14px;
  height: 14px;
}

.calendar-side-row__delete-icon.is-loading {
  animation: calendar-task-delete-spin 0.9s linear infinite;
}

.calendar-side-panel__error {
  margin: -2px 0 2px;
  color: #b3261e;
  font-size: 12px;
  line-height: 1.4;
}

@keyframes calendar-task-delete-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.calendar-side-panel__composer {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  gap: 12px;
  align-items: center;
  margin-top: 8px;
}

.calendar-side-panel__composer input {
  min-height: 34px;
  height: 34px;
  border-radius: 14px;
  border-color: color-mix(in srgb, var(--border) 62%, transparent);
  background: #fff;
  font-size: 13px;
}

.calendar-side-panel__add {
  min-height: 34px;
  height: 34px;
  border-radius: 14px;
  padding-inline: 12px;
  background: #2f6f54;
  color: #fff;
  font-size: 13px;
  font-weight: 600;
}

.calendar-side-panel__add:hover {
  background: #285f47;
}

.calendar-dialog {
  display: grid;
  gap: 10px;
}

.calendar-dialog__content {
  max-height: min(88vh, 760px);
  overflow-y: auto;
}

.calendar-dialog__switch {
  display: flex;
  gap: 8px;
}

.calendar-dialog__presets {
  display: grid;
  gap: 8px;
}

.calendar-dialog__presets h4 {
  margin: 0;
  font-size: 13px;
  font-weight: 600;
}

.calendar-dialog__presets-list {
  display: grid;
  gap: 8px;
}

.calendar-dialog__preset-card {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 10px;
  background: color-mix(in srgb, var(--bg-muted) 55%, var(--bg-elevated));
}

.calendar-dialog__preset-meta {
  min-width: 0;
}

.calendar-dialog__preset-meta p {
  margin: 0;
  font-size: 13px;
  font-weight: 600;
}

.calendar-dialog__preset-meta small {
  color: var(--text-secondary);
  font-size: 11px;
}

.calendar-dialog__preset-add {
  min-width: 64px;
}

.calendar-dialog__panel {
  display: grid;
  gap: 10px;
}

.calendar-dialog__guide {
  border: 1px solid var(--border);
  border-radius: 10px;
  background: color-mix(in srgb, var(--bg-muted) 62%, var(--bg-elevated));
  padding: 10px;
  display: grid;
  gap: 8px;
}

.calendar-dialog__guide-title {
  margin: 0;
  font-size: 12px;
  font-weight: 600;
}

.calendar-dialog__guide-list {
  margin: 0;
  padding-left: 18px;
  display: grid;
  gap: 4px;
  font-size: 12px;
  color: var(--text-secondary);
}

.calendar-dialog__guide-note {
  margin: 0;
  font-size: 11px;
  color: var(--text-secondary);
}

.calendar-dialog__panel label {
  display: grid;
  gap: 4px;
}

@media (max-width: 1320px) {
  .calendar-v2 {
    grid-template-columns: 260px minmax(0, 1fr) clamp(280px, 24vw, 340px);
  }

  .calendar-main-title {
    font-size: 30px;
  }
}

@media (max-width: 1440px) {
  .calendar-side-panel__composer {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 1080px) {
  .calendar-v2 {
    grid-template-columns: 1fr;
  }

  .calendar-v2__left,
  .calendar-v2__right {
    border: 0;
    border-bottom: 1px solid var(--border);
  }

  .calendar-v2__right {
    border-bottom: 0;
  }
}

@media (max-width: 760px) {
  .calendar-subscriptions__item {
    grid-template-columns: auto auto auto minmax(0, 1fr) auto;
    align-items: start;
  }

  .calendar-subscriptions__meta {
    grid-column: 2 / 5;
    margin-left: 0;
    padding-top: 2px;
  }

  .calendar-month-grid {
    overflow: auto;
    display: block;
    border: 0;
  }

  .calendar-month-grid__weekday {
    display: none;
  }

  .calendar-month-grid__cell {
    min-height: 110px;
    border-left: 1px solid var(--border);
  }
}

/* Adaptive layout overrides (27" -> 14" baseline). */
.focus-shell {
  padding: var(--page-pad);
  gap: var(--panel-gap);
}

.focus-shell__main {
  min-height: calc(100vh - (var(--page-pad) * 2));
  border-radius: var(--surface-radius-lg);
}

.focus-shell__route-layer {
  min-height: calc(100vh - (var(--page-pad) * 2));
  padding: var(--route-pad);
}

.focus-sidebar {
  min-height: calc(100vh - (var(--page-pad) * 2));
  border-radius: var(--surface-radius-lg);
}

.module-placeholder {
  min-height: calc(100vh - (var(--page-pad) * 2) - 36px);
}

.focus-page,
.focus-portal {
  min-height: calc(100vh - 100px);
}

.focus-portal__content {
  gap: var(--panel-gap);
}

.calendar-toolbar__compact-actions {
  display: none;
  align-items: center;
  gap: 8px;
}

.calendar-v2__drawer-header {
  display: none;
  align-items: center;
  justify-content: space-between;
}

.calendar-v2__drawer-header h3 {
  margin: 0;
  font-size: 14px;
}

.calendar-v2__drawer-close svg,
.calendar-v2__toggle svg {
  width: 16px;
  height: 16px;
}

@media (max-width: 1366px) {
  .focus-shell__route-layer {
    overflow-x: clip;
  }

  .focus-portal__content {
    grid-template-columns: minmax(220px, 280px) minmax(0, 1fr) minmax(220px, 280px);
  }

  .focus-sidebar__toggle span {
    display: none;
  }

  .focus-sidebar__item {
    padding: 0 10px;
    gap: 8px;
  }

  .task-detail-dialog__panel.dialog__panel {
    width: min(680px, 94vw);
  }
}

@media (max-width: 1200px) {
  .focus-portal__content {
    grid-template-columns: minmax(0, 1fr);
  }
}

@media (max-width: 1320px) {
  .calendar-v2 {
    position: relative;
    grid-template-columns: minmax(0, 1fr);
    min-height: calc(100vh - 140px);
    overflow: hidden;
  }

  .calendar-v2__main {
    grid-column: 1;
    z-index: 1;
    background: var(--bg-elevated);
  }

  .calendar-v2__left,
  .calendar-v2__right {
    position: absolute;
    top: 0;
    bottom: 0;
    width: min(360px, 88vw);
    border: 0;
    z-index: 4;
    box-shadow: 0 20px 42px color-mix(in srgb, #0f172a 16%, transparent);
    transition: transform 220ms ease, opacity 220ms ease;
    opacity: 0;
    pointer-events: none;
    overflow-y: auto;
  }

  .calendar-v2__left {
    left: 0;
    transform: translateX(-104%);
    border-right: 1px solid var(--border);
  }

  .calendar-v2__right {
    right: 0;
    transform: translateX(104%);
    border-left: 1px solid var(--border);
  }

  .calendar-v2__drawer-header {
    display: flex;
  }

  .calendar-v2.is-left-open .calendar-v2__left,
  .calendar-v2.is-right-open .calendar-v2__right {
    transform: translateX(0);
    opacity: 1;
    pointer-events: auto;
  }

  .calendar-toolbar__compact-actions {
    display: inline-flex;
  }

  .calendar-main-title {
    font-size: clamp(1.6rem, 2.8vw, 2rem);
  }
}

@media (max-width: 900px) {
  .calendar-toolbar {
    flex-wrap: wrap;
  }

  .calendar-toolbar__right {
    margin-left: auto;
  }
}
/* Labs + RSS shell */
.focus-shell {
  min-height: 100vh;
  display: flex;
  gap: 14px;
  padding: 14px;
  background: linear-gradient(180deg, var(--surface), var(--bg-muted));
}

.focus-shell__main {
  flex: 1;
  min-width: 0;
  min-height: calc(100vh - 28px);
  border-radius: 22px;
  border: 1px solid color-mix(in srgb, var(--border) 72%, transparent);
  background: color-mix(in srgb, var(--surface) 94%, var(--bg-muted) 6%);
  overflow: hidden;
}

.focus-shell__route-layer {
  min-height: calc(100vh - 28px);
  padding: 16px;
}

.focus-sidebar {
  min-height: calc(100vh - 28px);
  border-radius: 22px;
  border: 1px solid color-mix(in srgb, var(--border) 70%, transparent);
  background: color-mix(in srgb, var(--surface) 97%, var(--bg-muted) 3%);
  box-shadow: 0 18px 36px color-mix(in srgb, #0f172a 11%, transparent);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.focus-sidebar__top {
  padding: 12px;
  border-bottom: 1px solid color-mix(in srgb, var(--border) 72%, transparent);
}

.focus-sidebar__toggle {
  width: 100%;
  min-height: 36px;
  border: 1px solid color-mix(in srgb, var(--border) 70%, transparent);
  border-radius: 10px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  background: color-mix(in srgb, var(--bg-elevated) 90%, var(--surface) 10%);
}

.focus-sidebar__toggle span {
  font-size: 12px;
  font-weight: 600;
}

.focus-sidebar__nav {
  display: grid;
  gap: 6px;
  padding: 12px;
  flex: 1;
  align-content: start;
}

.focus-sidebar__item {
  min-height: 40px;
  border-radius: 12px;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 0 12px;
  text-decoration: none;
  color: var(--text-secondary);
  border: 1px solid transparent;
  font-size: 13px;
  font-weight: 600;
}

.focus-sidebar__item:hover {
  color: var(--text-primary);
  border-color: color-mix(in srgb, var(--border) 70%, transparent);
  background: color-mix(in srgb, var(--bg-elevated) 90%, var(--surface) 10%);
}

.focus-sidebar__item.is-active {
  color: var(--sidebar-active-fg, rgba(255, 255, 255, 0.95));
  border-color: color-mix(in srgb, var(--accent) 40%, var(--border));
  background: color-mix(in srgb, var(--accent) 78%, var(--bg-elevated) 22%);
}

.focus-sidebar__labs-zone {
  padding: 0 12px 10px;
  border-top: 1px solid color-mix(in srgb, var(--border) 72%, transparent);
}

.focus-sidebar__labs {
  margin-top: 10px;
}

.focus-sidebar__bottom {
  margin-top: auto;
  padding: 10px 12px 14px;
  border-top: 1px solid color-mix(in srgb, var(--border) 72%, transparent);
}

.focus-sidebar__theme-toggle {
  display: flex;
  justify-content: center;
  align-items: center;
}

.focus-sidebar.is-collapsed .focus-sidebar__item {
  width: 42px;
  min-height: 42px;
  justify-content: center;
  padding: 0;
}

.module-page-shell {
  min-height: calc(100vh - 72px);
}

.module-page-shell--narrow {
  max-width: 860px;
}

.module-placeholder-shell {
  min-height: calc(100vh - 76px);
  display: grid;
  place-items: center;
}

.module-placeholder-card {
  width: min(680px, 100%);
}

.labs-page {
  display: grid;
  gap: 16px;
}

.labs-page__header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
}

.labs-page__header h1 {
  margin: 0;
}

.labs-page__section h2 {
  margin: 0 0 10px;
  font-size: 14px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-secondary);
}

.labs-page__grid {
  display: grid;
  gap: 12px;
  grid-template-columns: repeat(3, minmax(0, 1fr));
}

.labs-page__card-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}

.rss-page {
  display: grid;
  gap: 14px;
}

.rss-page__header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
}

.rss-page__header h1 {
  margin: 0;
}

.rss-page__header-actions {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.rss-page__stale-banner {
  border: 1px solid color-mix(in srgb, #f59e0b 40%, var(--border));
  background: color-mix(in srgb, #f59e0b 12%, var(--surface));
  border-radius: 10px;
  padding: 8px 10px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.rss-page__error-card {
  border-color: color-mix(in srgb, #dc2626 45%, var(--border));
}

.rss-layout {
  display: grid;
  grid-template-columns: minmax(260px, 320px) minmax(380px, 1fr) minmax(300px, 0.85fr);
  gap: 12px;
  min-height: calc(100vh - 190px);
}

.rss-left,
.rss-middle,
.rss-right {
  min-width: 0;
  min-height: 100%;
}

.rss-left__header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 8px;
}

.rss-left__content {
  display: grid;
  gap: 10px;
  height: calc(100vh - 260px);
  overflow: auto;
}

.rss-left__form-grid {
  display: grid;
  gap: 8px;
}

.rss-left__form-grid input {
  min-width: 0;
}

.rss-left__section-list {
  display: grid;
  gap: 6px;
}

.rss-left__section {
  width: 100%;
  border: 1px solid color-mix(in srgb, var(--border) 72%, transparent);
  border-radius: 10px;
  padding: 8px 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: color-mix(in srgb, var(--surface) 96%, var(--bg-muted) 4%);
}

.rss-left__section.is-active {
  border-color: color-mix(in srgb, var(--accent) 42%, var(--border));
  background: color-mix(in srgb, var(--accent) 14%, var(--surface));
}

.rss-left__groups {
  border-top: 1px solid color-mix(in srgb, var(--border) 72%, transparent);
  padding-top: 10px;
  display: grid;
  gap: 10px;
}

.rss-left__groups-header p {
  margin: 0 0 8px;
  font-weight: 600;
}

.rss-left__group-create {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  gap: 6px;
}

.rss-left__group-create input {
  min-width: 0;
}

.rss-left__group-block {
  display: grid;
  gap: 6px;
}

.rss-left__group-line {
  display: grid;
  gap: 6px;
}

.rss-left__group-title {
  width: 100%;
  min-width: 0;
  border: 1px solid color-mix(in srgb, var(--border) 72%, transparent);
  border-radius: 10px;
  padding: 7px 9px;
  display: flex;
  align-items: center;
  gap: 8px;
  background: color-mix(in srgb, var(--surface) 96%, var(--bg-muted) 4%);
  text-align: left;
}

.rss-left__group-title span {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.rss-left__group-title.is-active {
  border-color: color-mix(in srgb, var(--accent) 42%, var(--border));
  background: color-mix(in srgb, var(--accent) 14%, var(--surface));
}

.rss-left__group-tools {
  display: flex;
  gap: 6px;
  align-items: center;
}

.rss-left__group-tools input {
  min-width: 0;
}

.rss-left__source-list {
  display: grid;
  gap: 6px;
  margin-left: 8px;
}

.rss-left__source-row {
  border: 1px solid color-mix(in srgb, var(--border) 72%, transparent);
  border-radius: 10px;
  padding: 6px;
  display: grid;
  gap: 6px;
  background: color-mix(in srgb, var(--surface) 94%, var(--bg-muted) 6%);
}

.rss-left__source-link {
  width: 100%;
  min-width: 0;
  text-align: left;
  border-radius: 8px;
  padding: 4px 6px;
}

.rss-left__source-link.is-active {
  background: color-mix(in srgb, var(--accent) 14%, var(--surface));
}

.rss-left__source-link span {
  display: block;
  margin: 0;
  font-weight: 600;
}

.rss-left__source-link small {
  display: block;
  margin-top: 3px;
  color: var(--text-secondary);
  overflow-wrap: anywhere;
  word-break: break-word;
}

.rss-left__source-actions {
  display: grid;
  grid-template-columns: auto minmax(0, 1fr) auto;
  gap: 6px;
  align-items: center;
}

.rss-left__source-select {
  min-width: 0;
}

.rss-left__removed {
  border-top: 1px solid color-mix(in srgb, var(--border) 72%, transparent);
  padding-top: 10px;
}

.rss-left__removed-list {
  display: grid;
  gap: 8px;
  margin-top: 6px;
}

.rss-left__removed-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
  border: 1px solid color-mix(in srgb, var(--border) 72%, transparent);
  border-radius: 10px;
  padding: 8px;
}

.rss-left__removed-item p {
  margin: 0;
  font-weight: 600;
}

.rss-left__removed-item small {
  color: var(--text-secondary);
  overflow-wrap: anywhere;
  word-break: break-word;
}

.rss-middle__content {
  display: grid;
  gap: 12px;
  max-height: calc(100vh - 260px);
  overflow: auto;
}

.rss-middle__bucket {
  display: grid;
  gap: 8px;
}

.rss-middle__bucket h3 {
  margin: 0;
  font-size: 15px;
}

.rss-middle__bucket-list {
  display: grid;
  gap: 8px;
}

.rss-entry-card {
  width: 100%;
  border: 1px solid color-mix(in srgb, var(--border) 72%, transparent);
  border-radius: 12px;
  padding: 10px;
  background: color-mix(in srgb, var(--surface) 96%, var(--bg-muted) 4%);
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  gap: 10px;
  text-align: left;
}

.rss-entry-card.is-active {
  border-color: color-mix(in srgb, var(--accent) 42%, var(--border));
  background: color-mix(in srgb, var(--accent) 14%, var(--surface));
}

.rss-entry-card__main {
  min-width: 0;
  display: grid;
  gap: 6px;
}

.rss-entry-card__meta {
  display: flex;
  gap: 8px;
  align-items: center;
  color: var(--text-secondary);
  font-size: 12px;
}

.rss-entry-card__meta span {
  font-weight: 600;
  color: var(--text-secondary);
}

.rss-entry-card__title {
  margin: 0;
  font-size: 16px;
  font-weight: 700;
  line-height: 1.3;
}

.rss-entry-card__summary {
  margin: 0;
  color: var(--text-secondary);
  line-height: 1.5;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.rss-entry-card__thumb-wrap {
  width: 92px;
  height: 72px;
  border-radius: 8px;
  overflow: hidden;
  flex-shrink: 0;
  border: 1px solid color-mix(in srgb, var(--border) 72%, transparent);
}

.rss-entry-card__thumb {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.rss-right__content {
  max-height: calc(100vh - 260px);
  overflow: auto;
}

.rss-page__source-item,
.rss-page__entry-item {
  width: 100%;
  min-width: 0;
  text-align: left;
  border: 1px solid color-mix(in srgb, var(--border) 72%, transparent);
  border-radius: 10px;
  padding: 9px;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 8px;
  background: color-mix(in srgb, var(--surface) 94%, var(--bg-muted) 6%);
  overflow: hidden;
}

.rss-page__source-item > div:first-child,
.rss-page__entry-item > div:first-child {
  min-width: 0;
}

.rss-page__source-item.is-active,
.rss-page__entry-item.is-active {
  border-color: color-mix(in srgb, var(--accent) 45%, var(--border));
  background: color-mix(in srgb, var(--accent) 16%, var(--surface));
}

.rss-page__source-item p,
.rss-page__entry-item p {
  margin: 0;
  font-weight: 600;
}

.rss-page__source-item small,
.rss-page__entry-item small {
  display: block;
  margin-top: 4px;
  color: var(--text-secondary);
  overflow-wrap: anywhere;
  word-break: break-word;
}

.rss-page__source-actions {
  display: inline-flex;
  gap: 6px;
  flex-shrink: 0;
}

.rss-page__removed {
  border-top: 1px solid color-mix(in srgb, var(--border) 72%, transparent);
  padding-top: 8px;
}

.rss-page__removed p {
  margin: 0 0 8px;
  font-weight: 600;
}

.rss-page__removed-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
  padding: 6px 0;
}

.rss-page__summary {
  display: grid;
  gap: 10px;
}

.rss-page__summary p {
  margin: 0;
  line-height: 1.6;
}

.rss-page__summary a {
  color: var(--accent);
  overflow-wrap: anywhere;
}

@media (max-width: 1100px) {
  .focus-shell {
    flex-direction: column;
    padding: 10px;
    gap: 10px;
  }

  .focus-shell__main,
  .focus-shell__route-layer,
  .focus-sidebar {
    min-height: auto;
  }

  .focus-sidebar {
    width: 100% !important;
  }

  .focus-sidebar__nav {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }

  .focus-sidebar__item {
    min-height: 58px;
    flex-direction: column;
    justify-content: center;
    gap: 4px;
  }

  .focus-sidebar__labs-zone {
    border-top: 0;
    padding-top: 0;
  }

  .labs-page__grid {
    grid-template-columns: 1fr;
  }

  .rss-layout {
    grid-template-columns: 1fr;
    min-height: auto;
  }

  .rss-left__content,
  .rss-middle__content,
  .rss-right__content {
    max-height: none;
    height: auto;
  }
}
